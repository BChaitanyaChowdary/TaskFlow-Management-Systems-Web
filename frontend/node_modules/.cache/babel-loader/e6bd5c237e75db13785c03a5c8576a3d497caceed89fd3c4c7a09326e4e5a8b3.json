{"ast":null,"code":"import React,{useState}from'react';import{useQuery}from'react-query';import{useAuth}from'../../contexts/AuthContext';import{tasksAPI,projectsAPI}from'../../services/api';import Card from'../../components/UI/Card';import Badge from'../../components/UI/Badge';import LoadingSpinner from'../../components/UI/LoadingSpinner';import ProjectAnalytics from'../../components/Analytics/ProjectAnalytics';import TimeTracker from'../../components/TimeTracking/TimeTracker';import MobileMenu from'../../components/Navigation/MobileMenu';import{CheckSquare,CheckCircle,Clock,AlertCircle,Users,TrendingUp,BarChart3,Activity,Target,FolderOpen,Settings}from'lucide-react';import{Bar,Doughnut}from'react-chartjs-2';import{Chart as ChartJS,CategoryScale,LinearScale,BarElement,Title,Tooltip,Legend,ArcElement}from'chart.js';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";ChartJS.register(CategoryScale,LinearScale,BarElement,Title,Tooltip,Legend,ArcElement);const Dashboard=()=>{var _assignedProjectsResp,_smProjects$data6,_smProjects$data7,_smProjects$data8;const{user}=useAuth();const[selectedProjectId,setSelectedProjectId]=useState('');const[showAnalytics,setShowAnalytics]=useState(false);const[showMobileMenu,setShowMobileMenu]=useState(false);const[timeTrackingData,setTimeTrackingData]=useState([]);const{data:smProjects}=useQuery('smProjects',projectsAPI.getProjects,{enabled:(user===null||user===void 0?void 0:user.role)==='scrum_master'});// Employee: fetch assigned projects for dashboard\nconst{data:assignedProjectsResp,isLoading:assignedLoading,error:assignedError}=useQuery('assignedProjects',projectsAPI.getAssignedProjects,{enabled:(user===null||user===void 0?void 0:user.role)==='employee'});const{data:analyticsResp,isLoading,error}=useQuery(['taskAnalytics',user===null||user===void 0?void 0:user.role],async()=>{// Dashboard shows general analytics with charts\nconst res=await tasksAPI.getTaskAnalytics();console.log('Raw analytics response:',res);const data=res.data||res;console.log('Processed analytics data:',data);return data;},{refetchInterval:30000,retry:false,onSuccess:data=>{console.log('Analytics query success:',data);},onError:error=>{console.error('Analytics query error:',error);}});const analytics=analyticsResp;// Separate query for project-specific analytics when a project is selected\nconst{data:projectSpecificAnalytics,isLoading:projectAnalyticsLoading}=useQuery(['projectSpecificAnalytics',selectedProjectId],async()=>{if(selectedProjectId){console.log('Fetching project analytics for project:',selectedProjectId);const res=await projectsAPI.getProjectAnalytics(selectedProjectId);console.log('Project analytics response:',res);return res.data||res;}return null;},{enabled:!!selectedProjectId&&showAnalytics,retry:false,onSuccess:data=>{console.log('Project analytics query success:',data);},onError:error=>{console.error('Project analytics query error:',error);}});// Use project-specific analytics only\nconst projectAnalytics=projectSpecificAnalytics;// Debug logging\nconsole.log('Dashboard state:',{selectedProjectId,showAnalytics,projectAnalytics:projectAnalytics?'has data':'null',projectAnalyticsLoading,userRole:user===null||user===void 0?void 0:user.role});// Notifications are shown via the header bell; dashboard feed removed per request\n// Removed unused variables\n// Normalize assigned projects for employees\nconst assignedProjects=Array.isArray(assignedProjectsResp===null||assignedProjectsResp===void 0?void 0:assignedProjectsResp.data)?assignedProjectsResp.data:(assignedProjectsResp===null||assignedProjectsResp===void 0?void 0:(_assignedProjectsResp=assignedProjectsResp.data)===null||_assignedProjectsResp===void 0?void 0:_assignedProjectsResp.results)||[];if(isLoading||(user===null||user===void 0?void 0:user.role)==='employee'&&assignedLoading){return/*#__PURE__*/_jsx(\"div\",{className:\"flex items-center justify-center h-64\",children:/*#__PURE__*/_jsx(LoadingSpinner,{size:\"lg\"})});}if(error){return/*#__PURE__*/_jsx(\"div\",{className:\"text-center py-8\",children:/*#__PURE__*/_jsx(\"p\",{className:\"text-red-500\",children:\"Failed to load dashboard data\"})});}if((user===null||user===void 0?void 0:user.role)==='employee'&&assignedError){return/*#__PURE__*/_jsx(\"div\",{className:\"text-center py-8\",children:/*#__PURE__*/_jsxs(\"p\",{className:\"text-red-500\",children:[\"Failed to load assigned projects: \",assignedError.message]})});}const stats=[{name:'Total Tasks',value:(analytics===null||analytics===void 0?void 0:analytics.total_tasks)||0,icon:CheckSquare,color:'text-blue-600',bgColor:'bg-blue-50'},{name:'Completed',value:(analytics===null||analytics===void 0?void 0:analytics.completed_tasks)||0,icon:CheckSquare,color:'text-green-600',bgColor:'bg-green-50'},{name:'In Progress',value:(analytics===null||analytics===void 0?void 0:analytics.in_progress_tasks)||0,icon:Clock,color:'text-yellow-600',bgColor:'bg-yellow-50'},{name:'Overdue',value:(analytics===null||analytics===void 0?void 0:analytics.overdue_tasks)||0,icon:AlertCircle,color:'text-red-600',bgColor:'bg-red-50'}];// Chart data for tasks by status\nconst statusChartData={labels:['To Do','In Progress','Done'],datasets:[{data:[(analytics===null||analytics===void 0?void 0:analytics.todo_tasks)||0,(analytics===null||analytics===void 0?void 0:analytics.in_progress_tasks)||0,(analytics===null||analytics===void 0?void 0:analytics.completed_tasks)||0],backgroundColor:['#6b7280','#f59e0b','#10b981'],borderWidth:0}]};const statusChartOptions={responsive:true,maintainAspectRatio:false,plugins:{legend:{position:'bottom'}}};// Chart data for tasks by priority\nconst priorityItems=Array.isArray(analytics===null||analytics===void 0?void 0:analytics.tasks_by_priority)?analytics.tasks_by_priority:[];const priorityChartData={labels:priorityItems.map(item=>(item.priority||'').toString().charAt(0).toUpperCase()+(item.priority||'').toString().slice(1)),datasets:[{label:'Tasks',data:priorityItems.map(item=>item.count||0),backgroundColor:['#ef4444','#f59e0b','#3b82f6','#10b981'],borderWidth:0}]};const priorityChartOptions={responsive:true,maintainAspectRatio:false,plugins:{legend:{position:'bottom'}},scales:{y:{beginAtZero:true,ticks:{stepSize:1}}}};return/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-8\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"bg-gradient-to-r from-blue-50 via-indigo-50 to-purple-50 rounded-2xl p-8 border border-blue-100\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-6\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"p-4 bg-gradient-to-r from-blue-600 to-indigo-600 rounded-2xl shadow-lg\",children:/*#__PURE__*/_jsx(Activity,{className:\"h-8 w-8 text-white\"})}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"h1\",{className:\"text-4xl font-bold text-gradient-blue mb-2\",children:[\"Welcome back, \",(user===null||user===void 0?void 0:user.first_name)||(user===null||user===void 0?void 0:user.username),\"! \\uD83D\\uDC4B\"]}),/*#__PURE__*/_jsx(\"p\",{className:\"text-xl text-gray-600\",children:\"Here's what's happening with your tasks today.\"})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"flex items-center gap-3\",children:/*#__PURE__*/_jsx(\"button\",{onClick:()=>setShowMobileMenu(true),className:\"lg:hidden p-2 bg-gray-100 hover:bg-gray-200 rounded-lg\",children:/*#__PURE__*/_jsx(Settings,{className:\"h-5 w-5 text-gray-600\"})})})]})}),(user===null||user===void 0?void 0:user.role)==='scrum_master'&&/*#__PURE__*/_jsxs(Card,{className:\"p-8 shadow-xl border-0 bg-gradient-to-br from-white to-blue-50\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-col lg:flex-row lg:items-center justify-between mb-8 gap-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-4\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"p-3 bg-gradient-to-r from-blue-600 to-indigo-600 rounded-xl shadow-lg\",children:/*#__PURE__*/_jsx(FolderOpen,{className:\"h-6 w-6 text-white\"})}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-2xl font-bold text-gray-900\",children:\"Projects Overview\"}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-gray-600\",children:[\"Manage and monitor your projects\",(_smProjects$data=>{const list=Array.isArray(smProjects===null||smProjects===void 0?void 0:smProjects.data)?smProjects.data:(smProjects===null||smProjects===void 0?void 0:(_smProjects$data=smProjects.data)===null||_smProjects$data===void 0?void 0:_smProjects$data.results)||[];return list.length>0&&/*#__PURE__*/_jsxs(\"span\",{className:\"ml-2 px-3 py-1 bg-blue-100 text-blue-800 rounded-full text-sm font-semibold\",children:[list.length,\" \",list.length===1?'project':'projects']});})()]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-3\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"text-sm font-medium text-gray-700\",children:\"Filter by project:\"}),/*#__PURE__*/_jsxs(\"select\",{className:\"border-2 border-blue-200 rounded-xl px-4 py-2 text-sm bg-white/80 backdrop-blur-sm focus:border-blue-500 focus:outline-none transition-all duration-200\",value:selectedProjectId,onChange:e=>{setSelectedProjectId(e.target.value);if(e.target.value){setShowAnalytics(true);}},children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"All projects\"}),(_smProjects$data2=>{const list=Array.isArray(smProjects===null||smProjects===void 0?void 0:smProjects.data)?smProjects.data:(smProjects===null||smProjects===void 0?void 0:(_smProjects$data2=smProjects.data)===null||_smProjects$data2===void 0?void 0:_smProjects$data2.results)||[];return list.map(p=>/*#__PURE__*/_jsx(\"option\",{value:p.id,children:p.name},p.id));})()]})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\",children:(_smProjects$data3=>{const list=Array.isArray(smProjects===null||smProjects===void 0?void 0:smProjects.data)?smProjects.data:(smProjects===null||smProjects===void 0?void 0:(_smProjects$data3=smProjects.data)===null||_smProjects$data3===void 0?void 0:_smProjects$data3.results)||[];const displayProjects=list.slice(0,6);// Show only first 6 projects\nif(!list.length){return/*#__PURE__*/_jsxs(\"div\",{className:\"col-span-full text-center text-gray-500 py-12\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4\",children:/*#__PURE__*/_jsx(FolderOpen,{className:\"h-8 w-8 text-gray-400\"})}),/*#__PURE__*/_jsx(\"p\",{className:\"text-lg\",children:\"No projects yet\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-400 mt-2\",children:\"Create your first project to get started\"})]});}return/*#__PURE__*/_jsxs(_Fragment,{children:[displayProjects.map(p=>/*#__PURE__*/_jsx(Card,{className:\"h-full flex flex-col hover-lift transition-all duration-300 \".concat(String(selectedProjectId)===String(p.id)?'ring-2 ring-blue-500 bg-gradient-to-br from-blue-50 to-indigo-50':'bg-white'),children:/*#__PURE__*/_jsxs(\"div\",{className:\"p-6 flex-1 flex flex-col\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-start justify-between mb-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-3\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"p-3 rounded-xl \".concat(String(selectedProjectId)===String(p.id)?'bg-blue-600':'bg-gradient-to-r from-blue-500 to-indigo-500'),children:/*#__PURE__*/_jsx(FolderOpen,{className:\"h-6 w-6 text-white\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex-1\",children:[/*#__PURE__*/_jsx(\"h4\",{className:\"font-bold text-lg text-gray-900\",children:p.name}),p.description&&/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-600 mt-1 line-clamp-2\",children:p.description})]})]}),/*#__PURE__*/_jsxs(Badge,{variant:\"primary\",className:\"text-xs flex-shrink-0\",children:[p.task_count||0,\" tasks\"]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex-1 flex flex-col justify-between\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between text-sm\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-2\",children:[/*#__PURE__*/_jsx(Users,{className:\"h-4 w-4 text-gray-500\"}),/*#__PURE__*/_jsxs(\"span\",{className:\"text-gray-700\",children:[p.member_count||0,\" members\"]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-2\",children:[/*#__PURE__*/_jsx(TrendingUp,{className:\"h-4 w-4 text-gray-500\"}),/*#__PURE__*/_jsxs(\"span\",{className:\"text-gray-700\",children:[p.progress_percentage||0,\"% complete\"]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-2\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between text-xs text-gray-600\",children:[/*#__PURE__*/_jsx(\"span\",{children:\"Progress\"}),/*#__PURE__*/_jsxs(\"span\",{children:[p.progress_percentage||0,\"%\"]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"w-full bg-gray-200 rounded-full h-3 overflow-hidden\",children:/*#__PURE__*/_jsx(\"div\",{className:\"h-3 rounded-full bg-gradient-to-r from-blue-500 via-indigo-500 to-green-500 transition-all duration-500 ease-out\",style:{width:\"\".concat(p.progress_percentage||0,\"%\")}})})]})]}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>{setSelectedProjectId(String(p.id));setShowAnalytics(true);},className:\"w-full text-sm font-semibold px-4 py-3 rounded-xl transition-all duration-200 mt-4 \".concat(String(selectedProjectId)===String(p.id)&&showAnalytics?'bg-blue-600 text-white shadow-lg':'bg-gradient-to-r from-blue-50 to-indigo-50 text-blue-700 hover:from-blue-100 hover:to-indigo-100 hover:shadow-md'),children:String(selectedProjectId)===String(p.id)&&showAnalytics?'✓ Analytics Shown':'View Analytics'})]})]})},p.id)),list.length>6&&/*#__PURE__*/_jsx(\"div\",{className:\"col-span-full flex justify-center mt-6\",children:/*#__PURE__*/_jsxs(\"button\",{onClick:()=>window.location.href='/projects',className:\"px-8 py-4 bg-gradient-to-r from-blue-600 to-indigo-600 text-white font-semibold rounded-xl hover:from-blue-700 hover:to-indigo-700 transition-all duration-200 shadow-lg hover:shadow-xl flex items-center gap-3\",children:[/*#__PURE__*/_jsx(FolderOpen,{className:\"h-5 w-5\"}),\"View All Projects (\",list.length,\")\"]})})]});})()})]}),(user===null||user===void 0?void 0:user.role)==='employee'&&/*#__PURE__*/_jsxs(Card,{className:\"p-8 shadow-xl border-0 bg-gradient-to-br from-white to-green-50\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-col lg:flex-row lg:items-center justify-between mb-8 gap-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-4\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"p-3 bg-gradient-to-r from-green-600 to-emerald-600 rounded-xl shadow-lg\",children:/*#__PURE__*/_jsx(FolderOpen,{className:\"h-6 w-6 text-white\"})}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-2xl font-bold text-gray-900\",children:\"My Projects\"}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-gray-600\",children:[\"View and manage your assigned projects\",assignedProjects.length>0&&/*#__PURE__*/_jsxs(\"span\",{className:\"ml-2 px-3 py-1 bg-green-100 text-green-800 rounded-full text-sm font-semibold\",children:[assignedProjects.length,\" \",assignedProjects.length===1?'project':'projects']})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-3\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"text-sm font-medium text-gray-700\",children:\"Filter by project:\"}),/*#__PURE__*/_jsxs(\"select\",{className:\"border-2 border-green-200 rounded-xl px-4 py-2 text-sm bg-white/80 backdrop-blur-sm focus:border-green-500 focus:outline-none transition-all duration-200\",value:selectedProjectId,onChange:e=>{setSelectedProjectId(e.target.value);setShowAnalytics(!!e.target.value);},children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"All projects\"}),assignedProjects.map(p=>/*#__PURE__*/_jsx(\"option\",{value:p.id,children:p.name},p.id))]})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\",children:assignedProjects.length===0?/*#__PURE__*/_jsxs(\"div\",{className:\"col-span-full text-center text-gray-500 py-12\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4\",children:/*#__PURE__*/_jsx(FolderOpen,{className:\"h-8 w-8 text-gray-400\"})}),/*#__PURE__*/_jsx(\"p\",{className:\"text-lg\",children:\"No projects assigned yet\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-400 mt-2\",children:\"Contact your Scrum Master to be added to a project\"})]}):assignedProjects.map(p=>/*#__PURE__*/_jsx(Card,{className:\"h-full flex flex-col hover-lift transition-all duration-300 \".concat(String(selectedProjectId)===String(p.id)?'ring-2 ring-green-500 bg-gradient-to-br from-green-50 to-emerald-50':'bg-white'),children:/*#__PURE__*/_jsxs(\"div\",{className:\"p-6 flex-1 flex flex-col\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-start justify-between mb-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-3\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"p-3 rounded-xl \".concat(String(selectedProjectId)===String(p.id)?'bg-green-600':'bg-gradient-to-r from-green-500 to-emerald-500'),children:/*#__PURE__*/_jsx(FolderOpen,{className:\"h-6 w-6 text-white\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex-1\",children:[/*#__PURE__*/_jsx(\"h4\",{className:\"font-bold text-lg text-gray-900\",children:p.name}),p.description&&/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-600 mt-1 line-clamp-2\",children:p.description})]})]}),/*#__PURE__*/_jsxs(Badge,{variant:\"primary\",className:\"text-xs flex-shrink-0\",children:[p.task_count||0,\" tasks\"]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex-1 flex flex-col justify-between\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between text-sm\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-2\",children:[/*#__PURE__*/_jsx(Users,{className:\"h-4 w-4 text-gray-500\"}),/*#__PURE__*/_jsxs(\"span\",{className:\"text-gray-700\",children:[p.member_count||0,\" members\"]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-2\",children:[/*#__PURE__*/_jsx(TrendingUp,{className:\"h-4 w-4 text-gray-500\"}),/*#__PURE__*/_jsxs(\"span\",{className:\"text-gray-700\",children:[p.progress_percentage||0,\"% complete\"]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-2\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between text-xs text-gray-600\",children:[/*#__PURE__*/_jsx(\"span\",{children:\"Progress\"}),/*#__PURE__*/_jsxs(\"span\",{children:[p.progress_percentage||0,\"%\"]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"w-full bg-gray-200 rounded-full h-3 overflow-hidden\",children:/*#__PURE__*/_jsx(\"div\",{className:\"h-3 rounded-full bg-gradient-to-r from-green-500 via-emerald-500 to-teal-500 transition-all duration-500 ease-out\",style:{width:\"\".concat(p.progress_percentage||0,\"%\")}})})]})]}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>{console.log('Employee project button clicked:',p.id,p.name);setSelectedProjectId(String(p.id));setShowAnalytics(true);console.log('State set - selectedProjectId:',String(p.id),'showAnalytics: true');},className:\"w-full text-sm font-semibold px-4 py-3 rounded-xl transition-all duration-200 mt-4 \".concat(String(selectedProjectId)===String(p.id)&&showAnalytics?'bg-green-600 text-white shadow-lg':'bg-gradient-to-r from-green-50 to-emerald-50 text-green-700 hover:from-green-100 hover:to-emerald-100 hover:shadow-md'),children:String(selectedProjectId)===String(p.id)&&showAnalytics?'✓ Analytics Shown':'View Analytics'})]})]})},p.id))})]}),(()=>{console.log('Project Analytics condition check:',{showAnalytics,selectedProjectId,condition:showAnalytics&&selectedProjectId,userRole:user===null||user===void 0?void 0:user.role});return showAnalytics&&selectedProjectId;})()&&/*#__PURE__*/_jsxs(Card,{className:\"p-8 shadow-xl border-0 bg-gradient-to-br from-white to-indigo-50\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between mb-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-4\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"p-3 bg-gradient-to-r from-indigo-600 to-purple-600 rounded-xl shadow-lg\",children:/*#__PURE__*/_jsx(BarChart3,{className:\"h-6 w-6 text-white\"})}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-2xl font-bold text-gray-900\",children:\"Project Analytics\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-600\",children:(_smProjects$data4=>{const list=(user===null||user===void 0?void 0:user.role)==='scrum_master'?Array.isArray(smProjects===null||smProjects===void 0?void 0:smProjects.data)?smProjects.data:(smProjects===null||smProjects===void 0?void 0:(_smProjects$data4=smProjects.data)===null||_smProjects$data4===void 0?void 0:_smProjects$data4.results)||[]:assignedProjects;const project=list.find(p=>String(p.id)===String(selectedProjectId));return project?\"Detailed insights for \".concat(project.name):'Project analytics';})()}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-xs text-gray-500 mt-1\",children:[\"Debug: showAnalytics=\",showAnalytics.toString(),\", selectedProjectId=\",selectedProjectId,\", projectAnalytics=\",projectAnalytics?'loaded':'null',\", loading=\",projectAnalyticsLoading.toString()]})]})]}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>{setShowAnalytics(false);setSelectedProjectId('');},className:\"px-4 py-2 text-sm font-medium text-gray-600 bg-gray-100 hover:bg-gray-200 rounded-lg transition-colors\",children:\"Close Analytics\"})]}),/*#__PURE__*/_jsx(ProjectAnalytics,{analytics:projectAnalytics,projectName:(_smProjects$data5=>{const list=(user===null||user===void 0?void 0:user.role)==='scrum_master'?Array.isArray(smProjects===null||smProjects===void 0?void 0:smProjects.data)?smProjects.data:(smProjects===null||smProjects===void 0?void 0:(_smProjects$data5=smProjects.data)===null||_smProjects$data5===void 0?void 0:_smProjects$data5.results)||[]:assignedProjects;const project=list.find(p=>String(p.id)===String(selectedProjectId));return(project===null||project===void 0?void 0:project.name)||'';})(),isLoading:projectAnalyticsLoading})]}),!selectedProjectId&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"div\",{className:\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6\",children:stats.map(stat=>{const Icon=stat.icon;return/*#__PURE__*/_jsx(Card,{className:\"p-6\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"p-3 rounded-lg \".concat(stat.bgColor),children:/*#__PURE__*/_jsx(Icon,{className:\"h-6 w-6 \".concat(stat.color)})}),/*#__PURE__*/_jsxs(\"div\",{className:\"ml-4\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-sm font-medium text-gray-600\",children:stat.name}),/*#__PURE__*/_jsx(\"p\",{className:\"text-2xl font-bold text-gray-900\",children:stat.value})]})]})},stat.name);})}),/*#__PURE__*/_jsx(\"div\",{className:\"grid grid-cols-1 lg:grid-cols-4 gap-6\",children:/*#__PURE__*/_jsx(\"div\",{className:\"lg:col-span-1\",children:/*#__PURE__*/_jsx(TimeTracker,{taskId:\"dashboard-timer\",taskTitle:\"General Work\",onTimeUpdate:session=>{setTimeTrackingData(prev=>[...prev,session]);}})})}),/*#__PURE__*/_jsxs(Card,{className:\"p-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between mb-4\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-semibold text-gray-900\",children:\"Completion Rate\"}),/*#__PURE__*/_jsxs(Badge,{variant:\"success\",size:\"lg\",children:[(analytics===null||analytics===void 0?void 0:analytics.completion_rate)||0,\"%\"]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"w-full bg-gray-200 rounded-full h-2\",children:/*#__PURE__*/_jsx(\"div\",{className:\"bg-green-600 h-2 rounded-full transition-all duration-300\",style:{width:\"\".concat((analytics===null||analytics===void 0?void 0:analytics.completion_rate)||0,\"%\")}})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 lg:grid-cols-2 gap-6\",children:[/*#__PURE__*/_jsxs(Card,{className:\"p-6\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-semibold text-gray-900 mb-4\",children:\"Tasks by Status\"}),/*#__PURE__*/_jsx(\"div\",{className:\"h-64\",children:/*#__PURE__*/_jsx(Doughnut,{data:statusChartData,options:statusChartOptions})})]}),/*#__PURE__*/_jsxs(Card,{className:\"p-6\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-semibold text-gray-900 mb-4\",children:\"Tasks by Priority\"}),/*#__PURE__*/_jsx(\"div\",{className:\"h-64\",children:/*#__PURE__*/_jsx(Bar,{data:priorityChartData,options:priorityChartOptions})})]})]}),/*#__PURE__*/_jsxs(Card,{className:\"p-6\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-semibold text-gray-900 mb-4\",children:\"Projects Overview\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 md:grid-cols-3 gap-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"text-center p-4 bg-blue-50 rounded-lg\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"text-2xl font-bold text-blue-600\",children:(user===null||user===void 0?void 0:user.role)==='scrum_master'?Array.isArray(smProjects===null||smProjects===void 0?void 0:smProjects.data)?smProjects.data.length:((smProjects===null||smProjects===void 0?void 0:(_smProjects$data6=smProjects.data)===null||_smProjects$data6===void 0?void 0:_smProjects$data6.results)||[]).length:assignedProjects.length}),/*#__PURE__*/_jsx(\"div\",{className:\"text-sm text-blue-800\",children:\"Total Projects\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-center p-4 bg-green-50 rounded-lg\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"text-2xl font-bold text-green-600\",children:(user===null||user===void 0?void 0:user.role)==='scrum_master'?Array.isArray(smProjects===null||smProjects===void 0?void 0:smProjects.data)?smProjects.data.filter(p=>p.progress_percentage>=100).length:((smProjects===null||smProjects===void 0?void 0:(_smProjects$data7=smProjects.data)===null||_smProjects$data7===void 0?void 0:_smProjects$data7.results)||[]).filter(p=>p.progress_percentage>=100).length:assignedProjects.filter(p=>p.progress_percentage>=100).length}),/*#__PURE__*/_jsx(\"div\",{className:\"text-sm text-green-800\",children:\"Completed Projects\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-center p-4 bg-yellow-50 rounded-lg\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"text-2xl font-bold text-yellow-600\",children:(user===null||user===void 0?void 0:user.role)==='scrum_master'?Array.isArray(smProjects===null||smProjects===void 0?void 0:smProjects.data)?smProjects.data.filter(p=>p.progress_percentage>0&&p.progress_percentage<100).length:((smProjects===null||smProjects===void 0?void 0:(_smProjects$data8=smProjects.data)===null||_smProjects$data8===void 0?void 0:_smProjects$data8.results)||[]).filter(p=>p.progress_percentage>0&&p.progress_percentage<100).length:assignedProjects.filter(p=>p.progress_percentage>0&&p.progress_percentage<100).length}),/*#__PURE__*/_jsx(\"div\",{className:\"text-sm text-yellow-800\",children:\"In Progress Projects\"})]})]})]}),(analytics===null||analytics===void 0?void 0:analytics.recent_activities)&&analytics.recent_activities.length>0&&/*#__PURE__*/_jsxs(Card,{className:\"p-6\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-semibold text-gray-900 mb-6\",children:\"Recent Activities\"}),/*#__PURE__*/_jsx(\"div\",{className:\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-5 gap-4\",children:analytics.recent_activities.slice(0,10).map((activity,index)=>/*#__PURE__*/_jsx(\"div\",{className:\"bg-gradient-to-br from-blue-50 to-indigo-50 rounded-lg p-4 border border-blue-100 hover:shadow-md transition-shadow\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-start space-x-3\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"flex-shrink-0\",children:/*#__PURE__*/_jsx(\"div\",{className:\"w-3 h-3 bg-blue-600 rounded-full mt-1\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex-1 min-w-0\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-900 font-medium line-clamp-2\",children:activity.description}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-xs text-gray-500 mt-2\",children:[\"by \",activity.user_name]}),/*#__PURE__*/_jsx(\"p\",{className:\"text-xs text-gray-400 mt-1\",children:new Date(activity.created_at).toLocaleDateString()})]})]})},index))})]}),/*#__PURE__*/_jsxs(Card,{className:\"p-6 bg-gradient-to-br from-indigo-50 to-purple-50 border-indigo-200\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"flex items-center justify-between mb-6\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-3\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"p-3 bg-gradient-to-r from-indigo-500 to-purple-500 rounded-xl shadow-lg\",children:/*#__PURE__*/_jsx(TrendingUp,{className:\"h-6 w-6 text-white\"})}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-xl font-bold text-gray-900\",children:\"Productivity Insights\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-600\",children:\"Team performance and task distribution\"})]})]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"text-center p-4 bg-white rounded-xl border border-indigo-100\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"text-2xl font-bold text-indigo-600 mb-1\",children:(analytics===null||analytics===void 0?void 0:analytics.avg_task_completion_time)||'N/A'}),/*#__PURE__*/_jsx(\"div\",{className:\"text-sm text-gray-500\",children:\"Avg. Completion Time\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-center p-4 bg-white rounded-xl border border-indigo-100\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"text-2xl font-bold text-green-600 mb-1\",children:(analytics===null||analytics===void 0?void 0:analytics.tasks_completed_today)||0}),/*#__PURE__*/_jsx(\"div\",{className:\"text-sm text-gray-500\",children:\"Completed Today\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-center p-4 bg-white rounded-xl border border-indigo-100\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"text-2xl font-bold text-orange-600 mb-1\",children:(analytics===null||analytics===void 0?void 0:analytics.overdue_tasks)||0}),/*#__PURE__*/_jsx(\"div\",{className:\"text-sm text-gray-500\",children:\"Overdue Tasks\"})]})]}),(user===null||user===void 0?void 0:user.role)==='scrum_master'&&(analytics===null||analytics===void 0?void 0:analytics.tasks_by_assignee)&&analytics.tasks_by_assignee.length>0&&/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h4\",{className:\"text-lg font-semibold text-gray-900 mb-4\",children:\"Team Member Performance\"}),/*#__PURE__*/_jsx(\"div\",{className:\"space-y-3\",children:analytics.tasks_by_assignee.map((member,index)=>/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between p-4 bg-white rounded-xl border border-indigo-100 hover:shadow-md transition-all duration-200\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-4\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-10 h-10 bg-gradient-to-r from-indigo-400 to-purple-400 rounded-full flex items-center justify-center shadow-lg\",children:/*#__PURE__*/_jsx(\"span\",{className:\"text-white font-bold text-lg\",children:(member.assignee__first_name||'U').charAt(0)})}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"p\",{className:\"font-bold text-gray-900 text-lg\",children:[member.assignee__first_name,\" \",member.assignee__last_name]}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-500\",children:\"Team Member\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"text-center\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"text-xl font-bold text-green-600\",children:member.completed||0}),/*#__PURE__*/_jsx(\"div\",{className:\"text-xs text-gray-500\",children:\"Completed\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-center\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"text-xl font-bold text-yellow-600\",children:member.in_progress||0}),/*#__PURE__*/_jsx(\"div\",{className:\"text-xs text-gray-500\",children:\"In Progress\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-center\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"text-xl font-bold text-gray-600\",children:member.total||0}),/*#__PURE__*/_jsx(\"div\",{className:\"text-xs text-gray-500\",children:\"Total\"})]})]})]},index))})]})]})]}),/*#__PURE__*/_jsx(MobileMenu,{isOpen:showMobileMenu,onClose:()=>setShowMobileMenu(false),onSearch:()=>{},onNotifications:()=>{}})]});};export default Dashboard;","map":{"version":3,"names":["React","useState","useQuery","useAuth","tasksAPI","projectsAPI","Card","Badge","LoadingSpinner","ProjectAnalytics","TimeTracker","MobileMenu","CheckSquare","CheckCircle","Clock","AlertCircle","Users","TrendingUp","BarChart3","Activity","Target","FolderOpen","Settings","Bar","Doughnut","Chart","ChartJS","CategoryScale","LinearScale","BarElement","Title","Tooltip","Legend","ArcElement","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","register","Dashboard","_assignedProjectsResp","_smProjects$data6","_smProjects$data7","_smProjects$data8","user","selectedProjectId","setSelectedProjectId","showAnalytics","setShowAnalytics","showMobileMenu","setShowMobileMenu","timeTrackingData","setTimeTrackingData","data","smProjects","getProjects","enabled","role","assignedProjectsResp","isLoading","assignedLoading","error","assignedError","getAssignedProjects","analyticsResp","res","getTaskAnalytics","console","log","refetchInterval","retry","onSuccess","onError","analytics","projectSpecificAnalytics","projectAnalyticsLoading","getProjectAnalytics","projectAnalytics","userRole","assignedProjects","Array","isArray","results","className","children","size","message","stats","name","value","total_tasks","icon","color","bgColor","completed_tasks","in_progress_tasks","overdue_tasks","statusChartData","labels","datasets","todo_tasks","backgroundColor","borderWidth","statusChartOptions","responsive","maintainAspectRatio","plugins","legend","position","priorityItems","tasks_by_priority","priorityChartData","map","item","priority","toString","charAt","toUpperCase","slice","label","count","priorityChartOptions","scales","y","beginAtZero","ticks","stepSize","first_name","username","onClick","_smProjects$data","list","length","onChange","e","target","_smProjects$data2","p","id","_smProjects$data3","displayProjects","concat","String","description","variant","task_count","member_count","progress_percentage","style","width","window","location","href","condition","_smProjects$data4","project","find","projectName","_smProjects$data5","stat","Icon","taskId","taskTitle","onTimeUpdate","session","prev","completion_rate","options","filter","recent_activities","activity","index","user_name","Date","created_at","toLocaleDateString","avg_task_completion_time","tasks_completed_today","tasks_by_assignee","member","assignee__first_name","assignee__last_name","completed","in_progress","total","isOpen","onClose","onSearch","onNotifications"],"sources":["C:/Users/B Chaitanya Chowdary/Desktop/Task/frontend/src/pages/Dashboard/Dashboard.js"],"sourcesContent":["import React, { useState } from 'react';\nimport { useQuery } from 'react-query';\nimport { useAuth } from '../../contexts/AuthContext';\nimport { tasksAPI, projectsAPI } from '../../services/api';\nimport Card from '../../components/UI/Card';\nimport Badge from '../../components/UI/Badge';\nimport LoadingSpinner from '../../components/UI/LoadingSpinner';\nimport ProjectAnalytics from '../../components/Analytics/ProjectAnalytics';\nimport TimeTracker from '../../components/TimeTracking/TimeTracker';\nimport MobileMenu from '../../components/Navigation/MobileMenu';\nimport {\n  CheckSquare,\n  CheckCircle,\n  Clock,\n  AlertCircle,\n  Users,\n  TrendingUp,\n  BarChart3,\n  Activity,\n  Target,\n  FolderOpen,\n  Settings,\n} from 'lucide-react';\nimport { Bar, Doughnut } from 'react-chartjs-2';\nimport {\n  Chart as ChartJS,\n  CategoryScale,\n  LinearScale,\n  BarElement,\n  Title,\n  Tooltip,\n  Legend,\n  ArcElement,\n} from 'chart.js';\n\nChartJS.register(\n  CategoryScale,\n  LinearScale,\n  BarElement,\n  Title,\n  Tooltip,\n  Legend,\n  ArcElement\n);\n\nconst Dashboard = () => {\n  const { user } = useAuth();\n\n  const [selectedProjectId, setSelectedProjectId] = useState('');\n  const [showAnalytics, setShowAnalytics] = useState(false);\n  const [showMobileMenu, setShowMobileMenu] = useState(false);\n  const [timeTrackingData, setTimeTrackingData] = useState([]);\n\n  const { data: smProjects } = useQuery(\n    'smProjects',\n    projectsAPI.getProjects,\n    { enabled: user?.role === 'scrum_master' }\n  );\n\n  // Employee: fetch assigned projects for dashboard\n  const { data: assignedProjectsResp, isLoading: assignedLoading, error: assignedError } = useQuery(\n    'assignedProjects',\n    projectsAPI.getAssignedProjects,\n    { enabled: user?.role === 'employee' }\n  );\n\n  const { data: analyticsResp, isLoading, error } = useQuery(\n    ['taskAnalytics', user?.role],\n    async () => {\n      // Dashboard shows general analytics with charts\n      const res = await tasksAPI.getTaskAnalytics();\n      console.log('Raw analytics response:', res);\n      const data = res.data || res;\n      console.log('Processed analytics data:', data);\n      return data;\n    },\n    { \n      refetchInterval: 30000, \n      retry: false,\n      onSuccess: (data) => {\n        console.log('Analytics query success:', data);\n      },\n      onError: (error) => {\n        console.error('Analytics query error:', error);\n      }\n    }\n  );\n  const analytics = analyticsResp;\n\n  // Separate query for project-specific analytics when a project is selected\n  const { data: projectSpecificAnalytics, isLoading: projectAnalyticsLoading } = useQuery(\n    ['projectSpecificAnalytics', selectedProjectId],\n    async () => {\n      if (selectedProjectId) {\n        console.log('Fetching project analytics for project:', selectedProjectId);\n        const res = await projectsAPI.getProjectAnalytics(selectedProjectId);\n        console.log('Project analytics response:', res);\n        return res.data || res;\n      }\n      return null;\n    },\n    {\n      enabled: !!selectedProjectId && showAnalytics,\n      retry: false,\n      onSuccess: (data) => {\n        console.log('Project analytics query success:', data);\n      },\n      onError: (error) => {\n        console.error('Project analytics query error:', error);\n      }\n    }\n  );\n\n  // Use project-specific analytics only\n  const projectAnalytics = projectSpecificAnalytics;\n  \n  // Debug logging\n  console.log('Dashboard state:', {\n    selectedProjectId,\n    showAnalytics,\n    projectAnalytics: projectAnalytics ? 'has data' : 'null',\n    projectAnalyticsLoading,\n    userRole: user?.role\n  });\n\n  // Notifications are shown via the header bell; dashboard feed removed per request\n\n  // Removed unused variables\n\n  // Normalize assigned projects for employees\n  const assignedProjects = Array.isArray(assignedProjectsResp?.data)\n    ? assignedProjectsResp.data\n    : (assignedProjectsResp?.data?.results || []);\n\n  if (isLoading || (user?.role === 'employee' && assignedLoading)) {\n    return (\n      <div className=\"flex items-center justify-center h-64\">\n        <LoadingSpinner size=\"lg\" />\n      </div>\n    );\n  }\n\n  if (error) {\n    return (\n      <div className=\"text-center py-8\">\n        <p className=\"text-red-500\">Failed to load dashboard data</p>\n      </div>\n    );\n  }\n\n  if (user?.role === 'employee' && assignedError) {\n    return (\n      <div className=\"text-center py-8\">\n        <p className=\"text-red-500\">Failed to load assigned projects: {assignedError.message}</p>\n      </div>\n    );\n  }\n\n  const stats = [\n    {\n      name: 'Total Tasks',\n      value: analytics?.total_tasks || 0,\n      icon: CheckSquare,\n      color: 'text-blue-600',\n      bgColor: 'bg-blue-50',\n    },\n    {\n      name: 'Completed',\n      value: analytics?.completed_tasks || 0,\n      icon: CheckSquare,\n      color: 'text-green-600',\n      bgColor: 'bg-green-50',\n    },\n    {\n      name: 'In Progress',\n      value: analytics?.in_progress_tasks || 0,\n      icon: Clock,\n      color: 'text-yellow-600',\n      bgColor: 'bg-yellow-50',\n    },\n    {\n      name: 'Overdue',\n      value: analytics?.overdue_tasks || 0,\n      icon: AlertCircle,\n      color: 'text-red-600',\n      bgColor: 'bg-red-50',\n    },\n  ];\n\n  // Chart data for tasks by status\n  const statusChartData = {\n    labels: ['To Do', 'In Progress', 'Done'],\n    datasets: [\n      {\n        data: [\n          analytics?.todo_tasks || 0,\n          analytics?.in_progress_tasks || 0,\n          analytics?.completed_tasks || 0,\n        ],\n        backgroundColor: ['#6b7280', '#f59e0b', '#10b981'],\n        borderWidth: 0,\n      },\n    ],\n  };\n\n  const statusChartOptions = {\n    responsive: true,\n    maintainAspectRatio: false,\n    plugins: {\n      legend: {\n        position: 'bottom',\n      },\n    },\n  };\n\n  // Chart data for tasks by priority\n  const priorityItems = Array.isArray(analytics?.tasks_by_priority) ? analytics.tasks_by_priority : [];\n  const priorityChartData = {\n    labels: priorityItems.map(item => (item.priority || '').toString().charAt(0).toUpperCase() + (item.priority || '').toString().slice(1)),\n    datasets: [\n      {\n        label: 'Tasks',\n        data: priorityItems.map(item => item.count || 0),\n        backgroundColor: ['#ef4444', '#f59e0b', '#3b82f6', '#10b981'],\n        borderWidth: 0,\n      },\n    ],\n  };\n\n  const priorityChartOptions = {\n    responsive: true,\n    maintainAspectRatio: false,\n    plugins: {\n      legend: {\n        position: 'bottom',\n      },\n    },\n    scales: {\n      y: {\n        beginAtZero: true,\n        ticks: {\n          stepSize: 1,\n        },\n      },\n    },\n  };\n\n  return (\n    <div className=\"space-y-8\">\n      {/* Enhanced Header with Quick Actions */}\n      <div className=\"bg-gradient-to-r from-blue-50 via-indigo-50 to-purple-50 rounded-2xl p-8 border border-blue-100\">\n        <div className=\"flex items-center justify-between\">\n          <div className=\"flex items-center gap-6\">\n            <div className=\"p-4 bg-gradient-to-r from-blue-600 to-indigo-600 rounded-2xl shadow-lg\">\n              <Activity className=\"h-8 w-8 text-white\" />\n            </div>\n            <div>\n              <h1 className=\"text-4xl font-bold text-gradient-blue mb-2\">\n                Welcome back, {user?.first_name || user?.username}! 👋\n              </h1>\n              <p className=\"text-xl text-gray-600\">\n                Here's what's happening with your tasks today.\n              </p>\n            </div>\n          </div>\n          \n          {/* Quick Actions */}\n          <div className=\"flex items-center gap-3\">\n            {/* Mobile Menu Button */}\n            <button\n              onClick={() => setShowMobileMenu(true)}\n              className=\"lg:hidden p-2 bg-gray-100 hover:bg-gray-200 rounded-lg\"\n            >\n              <Settings className=\"h-5 w-5 text-gray-600\" />\n            </button>\n\n          </div>\n        </div>\n      </div>\n\n      {/* Project selection handled within Projects Overview cards */}\n\n      {/* Scrum Master: All projects quick cards */}\n      {user?.role === 'scrum_master' && (\n        <Card className=\"p-8 shadow-xl border-0 bg-gradient-to-br from-white to-blue-50\">\n          <div className=\"flex flex-col lg:flex-row lg:items-center justify-between mb-8 gap-4\">\n            <div className=\"flex items-center gap-4\">\n              <div className=\"p-3 bg-gradient-to-r from-blue-600 to-indigo-600 rounded-xl shadow-lg\">\n                <FolderOpen className=\"h-6 w-6 text-white\" />\n              </div>\n              <div>\n                <h3 className=\"text-2xl font-bold text-gray-900\">Projects Overview</h3>\n                <p className=\"text-gray-600\">\n                  Manage and monitor your projects\n                  {(() => {\n                    const list = Array.isArray(smProjects?.data) ? smProjects.data : (smProjects?.data?.results || []);\n                    return list.length > 0 && (\n                      <span className=\"ml-2 px-3 py-1 bg-blue-100 text-blue-800 rounded-full text-sm font-semibold\">\n                        {list.length} {list.length === 1 ? 'project' : 'projects'}\n                      </span>\n                    );\n                  })()}\n                </p>\n              </div>\n            </div>\n            <div className=\"flex items-center gap-3\">\n              <label className=\"text-sm font-medium text-gray-700\">Filter by project:</label>\n              <select\n                className=\"border-2 border-blue-200 rounded-xl px-4 py-2 text-sm bg-white/80 backdrop-blur-sm focus:border-blue-500 focus:outline-none transition-all duration-200\"\n                value={selectedProjectId}\n                onChange={(e) => {\n                  setSelectedProjectId(e.target.value);\n                  if (e.target.value) {\n                    setShowAnalytics(true);\n                  }\n                }}\n              >\n                <option value=\"\">All projects</option>\n                {(() => {\n                  const list = Array.isArray(smProjects?.data) ? smProjects.data : (smProjects?.data?.results || []);\n                  return list.map((p) => (\n                    <option key={p.id} value={p.id}>{p.name}</option>\n                  ));\n                })()}\n              </select>\n            </div>\n          </div>\n          <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\">\n            {(() => {\n              const list = Array.isArray(smProjects?.data) ? smProjects.data : (smProjects?.data?.results || []);\n              const displayProjects = list.slice(0, 6); // Show only first 6 projects\n              \n              if (!list.length) {\n                return (\n                  <div className=\"col-span-full text-center text-gray-500 py-12\">\n                    <div className=\"w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4\">\n                      <FolderOpen className=\"h-8 w-8 text-gray-400\" />\n                    </div>\n                    <p className=\"text-lg\">No projects yet</p>\n                    <p className=\"text-sm text-gray-400 mt-2\">Create your first project to get started</p>\n                  </div>\n                );\n              }\n              \n              return (\n                <>\n                  {displayProjects.map((p) => (\n                    <Card key={p.id} className={`h-full flex flex-col hover-lift transition-all duration-300 ${String(selectedProjectId) === String(p.id) ? 'ring-2 ring-blue-500 bg-gradient-to-br from-blue-50 to-indigo-50' : 'bg-white'}`}> \n                      <div className=\"p-6 flex-1 flex flex-col\">\n                        <div className=\"flex items-start justify-between mb-4\">\n                          <div className=\"flex items-center gap-3\">\n                            <div className={`p-3 rounded-xl ${String(selectedProjectId) === String(p.id) ? 'bg-blue-600' : 'bg-gradient-to-r from-blue-500 to-indigo-500'}`}>\n                              <FolderOpen className=\"h-6 w-6 text-white\" />\n                            </div>\n                            <div className=\"flex-1\">\n                              <h4 className=\"font-bold text-lg text-gray-900\">{p.name}</h4>\n                              {p.description && (\n                                <p className=\"text-sm text-gray-600 mt-1 line-clamp-2\">{p.description}</p>\n                              )}\n                            </div>\n                          </div>\n                          <Badge variant=\"primary\" className=\"text-xs flex-shrink-0\">\n                            {p.task_count || 0} tasks\n                          </Badge>\n                        </div>\n                        \n                        <div className=\"flex-1 flex flex-col justify-between\">\n                          <div className=\"space-y-4\">\n                            <div className=\"flex items-center justify-between text-sm\">\n                              <div className=\"flex items-center gap-2\">\n                                <Users className=\"h-4 w-4 text-gray-500\" />\n                                <span className=\"text-gray-700\">{p.member_count || 0} members</span>\n                              </div>\n                              <div className=\"flex items-center gap-2\">\n                                <TrendingUp className=\"h-4 w-4 text-gray-500\" />\n                                <span className=\"text-gray-700\">{p.progress_percentage || 0}% complete</span>\n                              </div>\n                            </div>\n                            \n                            <div className=\"space-y-2\">\n                              <div className=\"flex justify-between text-xs text-gray-600\">\n                                <span>Progress</span>\n                                <span>{p.progress_percentage || 0}%</span>\n                              </div>\n                              <div className=\"w-full bg-gray-200 rounded-full h-3 overflow-hidden\">\n                                <div \n                                  className=\"h-3 rounded-full bg-gradient-to-r from-blue-500 via-indigo-500 to-green-500 transition-all duration-500 ease-out\" \n                                  style={{ width: `${p.progress_percentage || 0}%` }} \n                                />\n                              </div>\n                            </div>\n                          </div>\n                          \n                          <button\n                            onClick={() => {\n                              setSelectedProjectId(String(p.id));\n                              setShowAnalytics(true);\n                            }}\n                            className={`w-full text-sm font-semibold px-4 py-3 rounded-xl transition-all duration-200 mt-4 ${\n                              String(selectedProjectId) === String(p.id) && showAnalytics\n                                ? 'bg-blue-600 text-white shadow-lg' \n                                : 'bg-gradient-to-r from-blue-50 to-indigo-50 text-blue-700 hover:from-blue-100 hover:to-indigo-100 hover:shadow-md'\n                            }`}\n                          >\n                            {String(selectedProjectId) === String(p.id) && showAnalytics ? '✓ Analytics Shown' : 'View Analytics'}\n                          </button>\n                        </div>\n                      </div>\n                    </Card>\n                  ))}\n                  \n                  {/* Show \"View All Projects\" button if there are more than 6 projects */}\n                  {list.length > 6 && (\n                    <div className=\"col-span-full flex justify-center mt-6\">\n                      <button\n                        onClick={() => window.location.href = '/projects'}\n                        className=\"px-8 py-4 bg-gradient-to-r from-blue-600 to-indigo-600 text-white font-semibold rounded-xl hover:from-blue-700 hover:to-indigo-700 transition-all duration-200 shadow-lg hover:shadow-xl flex items-center gap-3\"\n                      >\n                        <FolderOpen className=\"h-5 w-5\" />\n                        View All Projects ({list.length})\n                      </button>\n                    </div>\n                  )}\n                </>\n              );\n            })()}\n          </div>\n        </Card>\n      )}\n\n      {/* Employee: My Projects section removed per request */}\n\n      {/* Employee: Projects Overview with selector */}\n      {user?.role === 'employee' && (\n        <Card className=\"p-8 shadow-xl border-0 bg-gradient-to-br from-white to-green-50\">\n          <div className=\"flex flex-col lg:flex-row lg:items-center justify-between mb-8 gap-4\">\n            <div className=\"flex items-center gap-4\">\n              <div className=\"p-3 bg-gradient-to-r from-green-600 to-emerald-600 rounded-xl shadow-lg\">\n                <FolderOpen className=\"h-6 w-6 text-white\" />\n              </div>\n              <div>\n                <h3 className=\"text-2xl font-bold text-gray-900\">My Projects</h3>\n                <p className=\"text-gray-600\">\n                  View and manage your assigned projects\n                  {assignedProjects.length > 0 && (\n                    <span className=\"ml-2 px-3 py-1 bg-green-100 text-green-800 rounded-full text-sm font-semibold\">\n                      {assignedProjects.length} {assignedProjects.length === 1 ? 'project' : 'projects'}\n                    </span>\n                  )}\n                </p>\n              </div>\n            </div>\n            <div className=\"flex items-center gap-3\">\n              <label className=\"text-sm font-medium text-gray-700\">Filter by project:</label>\n              <select\n                className=\"border-2 border-green-200 rounded-xl px-4 py-2 text-sm bg-white/80 backdrop-blur-sm focus:border-green-500 focus:outline-none transition-all duration-200\"\n                value={selectedProjectId}\n                onChange={(e) => {\n                  setSelectedProjectId(e.target.value);\n                  setShowAnalytics(!!e.target.value);\n                }}\n              >\n                <option value=\"\">All projects</option>\n                {assignedProjects.map((p) => (\n                  <option key={p.id} value={p.id}>{p.name}</option>\n                ))}\n              </select>\n            </div>\n          </div>\n          <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\">\n            {assignedProjects.length === 0 ? (\n              <div className=\"col-span-full text-center text-gray-500 py-12\">\n                <div className=\"w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4\">\n                  <FolderOpen className=\"h-8 w-8 text-gray-400\" />\n                </div>\n                <p className=\"text-lg\">No projects assigned yet</p>\n                <p className=\"text-sm text-gray-400 mt-2\">Contact your Scrum Master to be added to a project</p>\n              </div>\n            ) : (\n              assignedProjects.map((p) => (\n                <Card key={p.id} className={`h-full flex flex-col hover-lift transition-all duration-300 ${String(selectedProjectId) === String(p.id) ? 'ring-2 ring-green-500 bg-gradient-to-br from-green-50 to-emerald-50' : 'bg-white'}`}>\n                  <div className=\"p-6 flex-1 flex flex-col\">\n                    <div className=\"flex items-start justify-between mb-4\">\n                      <div className=\"flex items-center gap-3\">\n                        <div className={`p-3 rounded-xl ${String(selectedProjectId) === String(p.id) ? 'bg-green-600' : 'bg-gradient-to-r from-green-500 to-emerald-500'}`}>\n                          <FolderOpen className=\"h-6 w-6 text-white\" />\n                        </div>\n                        <div className=\"flex-1\">\n                          <h4 className=\"font-bold text-lg text-gray-900\">{p.name}</h4>\n                          {p.description && (\n                            <p className=\"text-sm text-gray-600 mt-1 line-clamp-2\">{p.description}</p>\n                          )}\n                        </div>\n                      </div>\n                      <Badge variant=\"primary\" className=\"text-xs flex-shrink-0\">\n                        {p.task_count || 0} tasks\n                      </Badge>\n                    </div>\n                    \n                    <div className=\"flex-1 flex flex-col justify-between\">\n                      <div className=\"space-y-4\">\n                        <div className=\"flex items-center justify-between text-sm\">\n                          <div className=\"flex items-center gap-2\">\n                            <Users className=\"h-4 w-4 text-gray-500\" />\n                            <span className=\"text-gray-700\">{p.member_count || 0} members</span>\n                          </div>\n                          <div className=\"flex items-center gap-2\">\n                            <TrendingUp className=\"h-4 w-4 text-gray-500\" />\n                            <span className=\"text-gray-700\">{p.progress_percentage || 0}% complete</span>\n                          </div>\n                        </div>\n                        \n                        <div className=\"space-y-2\">\n                          <div className=\"flex justify-between text-xs text-gray-600\">\n                            <span>Progress</span>\n                            <span>{p.progress_percentage || 0}%</span>\n                          </div>\n                          <div className=\"w-full bg-gray-200 rounded-full h-3 overflow-hidden\">\n                            <div \n                              className=\"h-3 rounded-full bg-gradient-to-r from-green-500 via-emerald-500 to-teal-500 transition-all duration-500 ease-out\" \n                              style={{ width: `${p.progress_percentage || 0}%` }} \n                            />\n                          </div>\n                        </div>\n                      </div>\n                      \n                      <button\n                        onClick={() => {\n                          console.log('Employee project button clicked:', p.id, p.name);\n                          setSelectedProjectId(String(p.id));\n                          setShowAnalytics(true);\n                          console.log('State set - selectedProjectId:', String(p.id), 'showAnalytics: true');\n                        }}\n                        className={`w-full text-sm font-semibold px-4 py-3 rounded-xl transition-all duration-200 mt-4 ${\n                          String(selectedProjectId) === String(p.id) && showAnalytics\n                            ? 'bg-green-600 text-white shadow-lg' \n                            : 'bg-gradient-to-r from-green-50 to-emerald-50 text-green-700 hover:from-green-100 hover:to-emerald-100 hover:shadow-md'\n                        }`}\n                      >\n                        {String(selectedProjectId) === String(p.id) && showAnalytics ? '✓ Analytics Shown' : 'View Analytics'}\n                      </button>\n                    </div>\n                  </div>\n                </Card>\n              ))\n            )}\n          </div>\n        </Card>\n      )}\n\n\n      {/* Project Analytics Section - Debug Version */}\n      {(() => {\n        console.log('Project Analytics condition check:', {\n          showAnalytics,\n          selectedProjectId,\n          condition: showAnalytics && selectedProjectId,\n          userRole: user?.role\n        });\n        return showAnalytics && selectedProjectId;\n      })() && (\n        <Card className=\"p-8 shadow-xl border-0 bg-gradient-to-br from-white to-indigo-50\">\n          <div className=\"flex items-center justify-between mb-6\">\n            <div className=\"flex items-center gap-4\">\n              <div className=\"p-3 bg-gradient-to-r from-indigo-600 to-purple-600 rounded-xl shadow-lg\">\n                <BarChart3 className=\"h-6 w-6 text-white\" />\n              </div>\n              <div>\n                <h3 className=\"text-2xl font-bold text-gray-900\">Project Analytics</h3>\n                <p className=\"text-gray-600\">\n                  {(() => {\n                    const list = user?.role === 'scrum_master' \n                      ? (Array.isArray(smProjects?.data) ? smProjects.data : (smProjects?.data?.results || []))\n                      : assignedProjects;\n                    const project = list.find(p => String(p.id) === String(selectedProjectId));\n                    return project ? `Detailed insights for ${project.name}` : 'Project analytics';\n                  })()}\n                </p>\n                {/* Debug info */}\n                <div className=\"text-xs text-gray-500 mt-1\">\n                  Debug: showAnalytics={showAnalytics.toString()}, selectedProjectId={selectedProjectId}, \n                  projectAnalytics={projectAnalytics ? 'loaded' : 'null'}, \n                  loading={projectAnalyticsLoading.toString()}\n                </div>\n              </div>\n            </div>\n            <button\n              onClick={() => {\n                setShowAnalytics(false);\n                setSelectedProjectId('');\n              }}\n              className=\"px-4 py-2 text-sm font-medium text-gray-600 bg-gray-100 hover:bg-gray-200 rounded-lg transition-colors\"\n            >\n              Close Analytics\n            </button>\n          </div>\n          \n          <ProjectAnalytics \n            analytics={projectAnalytics} \n            projectName={(() => {\n              const list = user?.role === 'scrum_master' \n                ? (Array.isArray(smProjects?.data) ? smProjects.data : (smProjects?.data?.results || []))\n                : assignedProjects;\n              const project = list.find(p => String(p.id) === String(selectedProjectId));\n              return project?.name || '';\n            })()}\n            isLoading={projectAnalyticsLoading}\n          />\n        </Card>\n      )}\n\n      {/* Main Dashboard Analytics - Show for all users when no specific project is selected */}\n      {!selectedProjectId && (\n        <>\n          {/* Stats Grid */}\n          <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6\">\n            {stats.map((stat) => {\n              const Icon = stat.icon;\n              return (\n                <Card key={stat.name} className=\"p-6\">\n                  <div className=\"flex items-center\">\n                    <div className={`p-3 rounded-lg ${stat.bgColor}`}>\n                      <Icon className={`h-6 w-6 ${stat.color}`} />\n                    </div>\n                    <div className=\"ml-4\">\n                      <p className=\"text-sm font-medium text-gray-600\">{stat.name}</p>\n                      <p className=\"text-2xl font-bold text-gray-900\">{stat.value}</p>\n                    </div>\n                  </div>\n                </Card>\n              );\n            })}\n          </div>\n\n          {/* Time Tracker - Compact Version */}\n          <div className=\"grid grid-cols-1 lg:grid-cols-4 gap-6\">\n            <div className=\"lg:col-span-1\">\n              <TimeTracker\n                taskId=\"dashboard-timer\"\n                taskTitle=\"General Work\"\n                onTimeUpdate={(session) => {\n                  setTimeTrackingData(prev => [...prev, session]);\n                }}\n              />\n            </div>\n          </div>\n\n          {/* Completion Rate */}\n          <Card className=\"p-6\">\n            <div className=\"flex items-center justify-between mb-4\">\n              <h3 className=\"text-lg font-semibold text-gray-900\">Completion Rate</h3>\n              <Badge variant=\"success\" size=\"lg\">\n                {analytics?.completion_rate || 0}%\n              </Badge>\n            </div>\n            <div className=\"w-full bg-gray-200 rounded-full h-2\">\n              <div\n                className=\"bg-green-600 h-2 rounded-full transition-all duration-300\"\n                style={{ width: `${analytics?.completion_rate || 0}%` }}\n              ></div>\n            </div>\n          </Card>\n\n          {/* Charts */}\n          <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-6\">\n            {/* Tasks by Status */}\n            <Card className=\"p-6\">\n              <h3 className=\"text-lg font-semibold text-gray-900 mb-4\">Tasks by Status</h3>\n              <div className=\"h-64\">\n                <Doughnut data={statusChartData} options={statusChartOptions} />\n              </div>\n            </Card>\n\n            {/* Tasks by Priority */}\n            <Card className=\"p-6\">\n              <h3 className=\"text-lg font-semibold text-gray-900 mb-4\">Tasks by Priority</h3>\n              <div className=\"h-64\">\n                <Bar data={priorityChartData} options={priorityChartOptions} />\n              </div>\n            </Card>\n          </div>\n\n          {/* Projects Overview */}\n          <Card className=\"p-6\">\n            <h3 className=\"text-lg font-semibold text-gray-900 mb-4\">Projects Overview</h3>\n            <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4\">\n              <div className=\"text-center p-4 bg-blue-50 rounded-lg\">\n                <div className=\"text-2xl font-bold text-blue-600\">\n                  {user?.role === 'scrum_master' \n                    ? (Array.isArray(smProjects?.data) ? smProjects.data.length : (smProjects?.data?.results || []).length)\n                    : assignedProjects.length\n                  }\n                </div>\n                <div className=\"text-sm text-blue-800\">Total Projects</div>\n              </div>\n              <div className=\"text-center p-4 bg-green-50 rounded-lg\">\n                <div className=\"text-2xl font-bold text-green-600\">\n                  {user?.role === 'scrum_master' \n                    ? (Array.isArray(smProjects?.data) ? smProjects.data.filter(p => p.progress_percentage >= 100).length : (smProjects?.data?.results || []).filter(p => p.progress_percentage >= 100).length)\n                    : assignedProjects.filter(p => p.progress_percentage >= 100).length\n                  }\n                </div>\n                <div className=\"text-sm text-green-800\">Completed Projects</div>\n              </div>\n              <div className=\"text-center p-4 bg-yellow-50 rounded-lg\">\n                <div className=\"text-2xl font-bold text-yellow-600\">\n                  {user?.role === 'scrum_master' \n                    ? (Array.isArray(smProjects?.data) ? smProjects.data.filter(p => p.progress_percentage > 0 && p.progress_percentage < 100).length : (smProjects?.data?.results || []).filter(p => p.progress_percentage > 0 && p.progress_percentage < 100).length)\n                    : assignedProjects.filter(p => p.progress_percentage > 0 && p.progress_percentage < 100).length\n                  }\n                </div>\n                <div className=\"text-sm text-yellow-800\">In Progress Projects</div>\n              </div>\n            </div>\n          </Card>\n\n          {/* Recent Activities */}\n          {analytics?.recent_activities && analytics.recent_activities.length > 0 && (\n            <Card className=\"p-6\">\n              <h3 className=\"text-lg font-semibold text-gray-900 mb-6\">Recent Activities</h3>\n              <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-5 gap-4\">\n                {analytics.recent_activities.slice(0, 10).map((activity, index) => (\n                  <div key={index} className=\"bg-gradient-to-br from-blue-50 to-indigo-50 rounded-lg p-4 border border-blue-100 hover:shadow-md transition-shadow\">\n                    <div className=\"flex items-start space-x-3\">\n                      <div className=\"flex-shrink-0\">\n                        <div className=\"w-3 h-3 bg-blue-600 rounded-full mt-1\"></div>\n                      </div>\n                      <div className=\"flex-1 min-w-0\">\n                        <p className=\"text-sm text-gray-900 font-medium line-clamp-2\">{activity.description}</p>\n                        <p className=\"text-xs text-gray-500 mt-2\">\n                          by {activity.user_name}\n                        </p>\n                        <p className=\"text-xs text-gray-400 mt-1\">\n                          {new Date(activity.created_at).toLocaleDateString()}\n                        </p>\n                      </div>\n                    </div>\n                  </div>\n                ))}\n              </div>\n            </Card>\n          )}\n\n          {/* Enhanced Productivity Insights */}\n          <Card className=\"p-6 bg-gradient-to-br from-indigo-50 to-purple-50 border-indigo-200\">\n            <div className=\"flex items-center justify-between mb-6\">\n              <div className=\"flex items-center gap-3\">\n                <div className=\"p-3 bg-gradient-to-r from-indigo-500 to-purple-500 rounded-xl shadow-lg\">\n                  <TrendingUp className=\"h-6 w-6 text-white\" />\n                </div>\n                <div>\n                  <h3 className=\"text-xl font-bold text-gray-900\">Productivity Insights</h3>\n                  <p className=\"text-sm text-gray-600\">Team performance and task distribution</p>\n                </div>\n              </div>\n            </div>\n            \n            <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6\">\n              <div className=\"text-center p-4 bg-white rounded-xl border border-indigo-100\">\n                <div className=\"text-2xl font-bold text-indigo-600 mb-1\">\n                  {analytics?.avg_task_completion_time || 'N/A'}\n                </div>\n                <div className=\"text-sm text-gray-500\">Avg. Completion Time</div>\n              </div>\n              <div className=\"text-center p-4 bg-white rounded-xl border border-indigo-100\">\n                <div className=\"text-2xl font-bold text-green-600 mb-1\">\n                  {analytics?.tasks_completed_today || 0}\n                </div>\n                <div className=\"text-sm text-gray-500\">Completed Today</div>\n              </div>\n              <div className=\"text-center p-4 bg-white rounded-xl border border-indigo-100\">\n                <div className=\"text-2xl font-bold text-orange-600 mb-1\">\n                  {analytics?.overdue_tasks || 0}\n                </div>\n                <div className=\"text-sm text-gray-500\">Overdue Tasks</div>\n              </div>\n            </div>\n\n            {/* Tasks by Assignee (Scrum Master only) */}\n            {user?.role === 'scrum_master' && analytics?.tasks_by_assignee && analytics.tasks_by_assignee.length > 0 && (\n              <div>\n                <h4 className=\"text-lg font-semibold text-gray-900 mb-4\">Team Member Performance</h4>\n                <div className=\"space-y-3\">\n                  {analytics.tasks_by_assignee.map((member, index) => (\n                    <div key={index} className=\"flex items-center justify-between p-4 bg-white rounded-xl border border-indigo-100 hover:shadow-md transition-all duration-200\">\n                      <div className=\"flex items-center space-x-4\">\n                        <div className=\"w-10 h-10 bg-gradient-to-r from-indigo-400 to-purple-400 rounded-full flex items-center justify-center shadow-lg\">\n                          <span className=\"text-white font-bold text-lg\">\n                            {(member.assignee__first_name || 'U').charAt(0)}\n                          </span>\n                        </div>\n                        <div>\n                          <p className=\"font-bold text-gray-900 text-lg\">\n                            {member.assignee__first_name} {member.assignee__last_name}\n                          </p>\n                          <p className=\"text-sm text-gray-500\">Team Member</p>\n                        </div>\n                      </div>\n                      <div className=\"flex items-center gap-6\">\n                        <div className=\"text-center\">\n                          <div className=\"text-xl font-bold text-green-600\">{member.completed || 0}</div>\n                          <div className=\"text-xs text-gray-500\">Completed</div>\n                        </div>\n                        <div className=\"text-center\">\n                          <div className=\"text-xl font-bold text-yellow-600\">{member.in_progress || 0}</div>\n                          <div className=\"text-xs text-gray-500\">In Progress</div>\n                        </div>\n                        <div className=\"text-center\">\n                          <div className=\"text-xl font-bold text-gray-600\">{member.total || 0}</div>\n                          <div className=\"text-xs text-gray-500\">Total</div>\n                        </div>\n                      </div>\n                    </div>\n                  ))}\n                </div>\n              </div>\n            )}\n          </Card>\n        </>\n      )}\n\n      {/* Modal Components */}\n      <MobileMenu\n        isOpen={showMobileMenu}\n        onClose={() => setShowMobileMenu(false)}\n        onSearch={() => {}}\n        onNotifications={() => {}}\n      />\n    </div>\n  );\n};\n\nexport default Dashboard;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}