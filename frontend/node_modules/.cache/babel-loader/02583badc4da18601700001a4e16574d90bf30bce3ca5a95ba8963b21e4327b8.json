{"ast":null,"code":"import React,{useMemo,useState}from'react';import{useQuery}from'react-query';import{tasksAPI,projectsAPI,authAPI}from'../../services/api';import{Link,useLocation}from'react-router-dom';import{useAuth}from'../../contexts/AuthContext';import{useTheme}from'../../contexts/ThemeContext';import{LayoutDashboard,CheckSquare,Kanban,FolderOpen,Users,User,LogOut,Menu,X,Bell,Moon,Sun,Search}from'lucide-react';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const Layout=_ref=>{var _notifResp$data,_user$role;let{children}=_ref;const{user,logout}=useAuth();const{isDarkMode,toggleTheme}=useTheme();const location=useLocation();const[sidebarOpen,setSidebarOpen]=useState(false);const[showLogoutModal,setShowLogoutModal]=useState(false);const[logoutPassword,setLogoutPassword]=useState('');const[showNotif,setShowNotif]=useState(false);const[showSearch,setShowSearch]=useState(false);const[searchQuery,setSearchQuery]=useState('');const[searchResults,setSearchResults]=useState([]);const[isSearching,setIsSearching]=useState(false);const{data:notifResp}=useQuery('notifications',tasksAPI.getNotifications,{refetchInterval:15000});const notificationsRaw=(notifResp===null||notifResp===void 0?void 0:(_notifResp$data=notifResp.data)===null||_notifResp$data===void 0?void 0:_notifResp$data.items)||(notifResp===null||notifResp===void 0?void 0:notifResp.items)||[];const[clearedAt,setClearedAt]=useState(()=>Number(window.localStorage.getItem('tf_cleared_at')||0));const[clearedNotifications,setClearedNotifications]=useState(()=>{const stored=window.localStorage.getItem('tf_cleared_notifications');return stored?JSON.parse(stored):[];});const notifications=useMemo(()=>{let filtered=notificationsRaw||[];// Filter by cleared timestamp\nif(clearedAt){filtered=filtered.filter(n=>new Date(n.created_at).getTime()>clearedAt);}// Filter by individually cleared notifications\nfiltered=filtered.filter(n=>!clearedNotifications.includes(\"\".concat(n.type,\"-\").concat(n.id)));return filtered;},[notificationsRaw,clearedAt,clearedNotifications]);const clearIndividualNotification=notification=>{const notificationId=\"\".concat(notification.type,\"-\").concat(notification.id);const newCleared=[...clearedNotifications,notificationId];setClearedNotifications(newCleared);window.localStorage.setItem('tf_cleared_notifications',JSON.stringify(newCleared));};// Search functionality\nconst performSearch=async query=>{if(!query.trim()){setSearchResults([]);return;}setIsSearching(true);try{var _tasksRes$value,_projectsRes$value,_employeesRes$value;// Search across different data sources\nconst searchPromises=[tasksAPI.getTasks({search:query}),projectsAPI.getProjects({search:query}),authAPI.getEmployees({search:query})];const[tasksRes,projectsRes,employeesRes]=await Promise.allSettled(searchPromises);const results=[];// Process tasks\nif(tasksRes.status==='fulfilled'&&(_tasksRes$value=tasksRes.value)!==null&&_tasksRes$value!==void 0&&_tasksRes$value.data){const tasks=Array.isArray(tasksRes.value.data)?tasksRes.value.data:tasksRes.value.data.results||[];tasks.forEach(task=>{var _task$title,_task$description;if((_task$title=task.title)!==null&&_task$title!==void 0&&_task$title.toLowerCase().includes(query.toLowerCase())||(_task$description=task.description)!==null&&_task$description!==void 0&&_task$description.toLowerCase().includes(query.toLowerCase())){results.push({type:'task',id:task.id,title:task.title,description:task.description,status:task.status,project:task.project_name});}});}// Process projects\nif(projectsRes.status==='fulfilled'&&(_projectsRes$value=projectsRes.value)!==null&&_projectsRes$value!==void 0&&_projectsRes$value.data){const projects=Array.isArray(projectsRes.value.data)?projectsRes.value.data:projectsRes.value.data.results||[];projects.forEach(project=>{var _project$name,_project$description;if((_project$name=project.name)!==null&&_project$name!==void 0&&_project$name.toLowerCase().includes(query.toLowerCase())||(_project$description=project.description)!==null&&_project$description!==void 0&&_project$description.toLowerCase().includes(query.toLowerCase())){results.push({type:'project',id:project.id,title:project.name,description:project.description,status:project.status,progress:project.progress_percentage});}});}// Process employees\nif(employeesRes.status==='fulfilled'&&(_employeesRes$value=employeesRes.value)!==null&&_employeesRes$value!==void 0&&_employeesRes$value.data){const employees=Array.isArray(employeesRes.value.data)?employeesRes.value.data:employeesRes.value.data.results||[];employees.forEach(employee=>{var _employee$email;const fullName=\"\".concat(employee.first_name||'',\" \").concat(employee.last_name||'').trim();if(fullName.toLowerCase().includes(query.toLowerCase())||(_employee$email=employee.email)!==null&&_employee$email!==void 0&&_employee$email.toLowerCase().includes(query.toLowerCase())){results.push({type:'employee',id:employee.id,title:fullName,description:employee.email,role:employee.role});}});}setSearchResults(results);}catch(error){console.error('Search error:',error);setSearchResults([]);}finally{setIsSearching(false);}};const handleSearchChange=e=>{const query=e.target.value;setSearchQuery(query);// Debounce search\nclearTimeout(window.searchTimeout);window.searchTimeout=setTimeout(()=>{performSearch(query);},300);};const navigation=[{name:'Dashboard',href:'/dashboard',icon:LayoutDashboard},{name:'Tasks',href:'/tasks',icon:CheckSquare},{name:'Kanban',href:'/kanban',icon:Kanban},{name:'Projects',href:'/projects',icon:FolderOpen},...((user===null||user===void 0?void 0:user.role)==='scrum_master'?[{name:'Users',href:'/users',icon:Users}]:[])];const isActive=path=>location.pathname===path;return/*#__PURE__*/_jsxs(\"div\",{className:\"min-h-screen \".concat(isDarkMode?'dark bg-gray-900':'bg-gray-50'),children:[/*#__PURE__*/_jsxs(\"div\",{className:\"fixed inset-0 z-50 lg:hidden \".concat(sidebarOpen?'block':'hidden'),children:[/*#__PURE__*/_jsx(\"div\",{className:\"fixed inset-0 bg-gray-600 bg-opacity-75\",onClick:()=>setSidebarOpen(false)}),/*#__PURE__*/_jsxs(\"div\",{className:\"fixed inset-y-0 left-0 flex w-64 flex-col shadow-xl \".concat(isDarkMode?'bg-gray-800':'bg-white'),children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex h-16 items-center justify-between px-4\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-xl font-bold \".concat(isDarkMode?'text-white':'text-gray-900'),children:\"TaskFlow\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setSidebarOpen(false),className:\"text-gray-400 hover:text-gray-600\",children:/*#__PURE__*/_jsx(X,{className:\"h-6 w-6\"})})]}),/*#__PURE__*/_jsx(\"nav\",{className:\"flex-1 px-4 py-4 space-y-2\",children:navigation.map(item=>{const Icon=item.icon;return/*#__PURE__*/_jsxs(Link,{to:item.href,className:\"flex items-center px-3 py-2 text-sm font-medium rounded-md \".concat(isActive(item.href)?isDarkMode?'bg-blue-600 text-white':'bg-blue-100 text-blue-700':isDarkMode?'text-gray-300 hover:bg-gray-700 hover:text-white':'text-gray-600 hover:bg-gray-50 hover:text-gray-900'),onClick:()=>setSidebarOpen(false),children:[/*#__PURE__*/_jsx(Icon,{className:\"mr-3 h-5 w-5\"}),item.name]},item.name);})})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"hidden lg:fixed lg:inset-y-0 lg:flex lg:w-64 lg:flex-col\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-col flex-grow border-r \".concat(isDarkMode?'bg-gray-800 border-gray-700':'bg-white border-gray-200'),children:[/*#__PURE__*/_jsx(\"div\",{className:\"flex h-16 items-center px-4\",children:/*#__PURE__*/_jsx(\"h1\",{className:\"text-xl font-bold \".concat(isDarkMode?'text-white':'text-gray-900'),children:\"TaskFlow\"})}),/*#__PURE__*/_jsx(\"nav\",{className:\"flex-1 px-4 py-4 space-y-2\",children:navigation.map(item=>{const Icon=item.icon;return/*#__PURE__*/_jsxs(Link,{to:item.href,className:\"flex items-center px-3 py-2 text-sm font-medium rounded-md \".concat(isActive(item.href)?isDarkMode?'bg-blue-600 text-white':'bg-blue-100 text-blue-700':isDarkMode?'text-gray-300 hover:bg-gray-700 hover:text-white':'text-gray-600 hover:bg-gray-50 hover:text-gray-900'),children:[/*#__PURE__*/_jsx(Icon,{className:\"mr-3 h-5 w-5\"}),item.name]},item.name);})})]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"lg:pl-64\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"sticky top-0 z-40 flex h-16 items-center justify-between border-b px-4 lg:px-8 \".concat(isDarkMode?'bg-gray-800 border-gray-700':'bg-white border-gray-200'),children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>setSidebarOpen(true),className:\"lg:hidden \".concat(isDarkMode?'text-gray-400 hover:text-gray-300':'text-gray-500 hover:text-gray-600'),children:/*#__PURE__*/_jsx(Menu,{className:\"h-6 w-6\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-4 ml-auto\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>setShowSearch(true),className:\"p-2 rounded-lg transition-colors \".concat(isDarkMode?'text-gray-400 hover:text-gray-300 hover:bg-gray-700':'text-gray-400 hover:text-gray-600 hover:bg-gray-100'),title:\"Search\",children:/*#__PURE__*/_jsx(Search,{className:\"h-5 w-5\"})}),/*#__PURE__*/_jsx(\"button\",{onClick:toggleTheme,className:\"p-2 rounded-lg transition-colors \".concat(isDarkMode?'text-gray-400 hover:text-gray-300 hover:bg-gray-700':'text-gray-400 hover:text-gray-600 hover:bg-gray-100'),title:isDarkMode?'Switch to Light Mode':'Switch to Dark Mode',children:isDarkMode?/*#__PURE__*/_jsx(Sun,{className:\"h-5 w-5 text-yellow-500\"}):/*#__PURE__*/_jsx(Moon,{className:\"h-5 w-5\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"relative\",children:[/*#__PURE__*/_jsxs(\"button\",{className:\"relative \".concat(isDarkMode?'text-gray-400 hover:text-gray-300':'text-gray-400 hover:text-gray-600'),onClick:()=>setShowNotif(!showNotif),children:[/*#__PURE__*/_jsx(Bell,{className:\"h-6 w-6\"}),notifications.length>0&&/*#__PURE__*/_jsxs(\"span\",{className:\"absolute -top-1 -right-1 inline-flex items-center justify-center px-1.5 py-0.5 text-[10px] font-medium leading-none text-white bg-red-600 rounded-full\",children:[Math.min(notifications.length,9),\"+\"]})]}),showNotif&&/*#__PURE__*/_jsxs(\"div\",{className:\"absolute right-0 mt-2 w-96 max-h-96 overflow-y-auto border rounded-xl shadow-2xl z-50 \".concat(isDarkMode?'bg-gray-800 border-gray-700':'bg-white border-gray-200'),children:[/*#__PURE__*/_jsxs(\"div\",{className:\"p-4 border-b flex items-center justify-between \".concat(isDarkMode?'border-gray-700':'border-gray-200'),children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-2\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"p-2 rounded-lg \".concat(isDarkMode?'bg-blue-600':'bg-blue-100'),children:/*#__PURE__*/_jsx(Bell,{className:\"h-4 w-4 \".concat(isDarkMode?'text-white':'text-blue-600')})}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"div\",{className:\"font-bold text-lg \".concat(isDarkMode?'text-white':'text-gray-900'),children:\"Notifications\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-xs \".concat(isDarkMode?'text-gray-400':'text-gray-500'),children:[notifications.length,\" \",notifications.length===1?'notification':'notifications']})]})]}),/*#__PURE__*/_jsx(\"button\",{className:\"px-3 py-1 text-xs rounded-lg font-medium transition-colors \".concat(isDarkMode?'bg-red-600 text-white hover:bg-red-700':'bg-red-100 text-red-700 hover:bg-red-200'),onClick:()=>{const now=Date.now();window.localStorage.setItem('tf_cleared_at',String(now));setClearedAt(now);},children:\"Clear All\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"p-3 space-y-3\",children:notifications.length===0?/*#__PURE__*/_jsxs(\"div\",{className:\"p-8 text-center \".concat(isDarkMode?'text-gray-400':'text-gray-500'),children:[/*#__PURE__*/_jsx(Bell,{className:\"h-12 w-12 mx-auto mb-3 \".concat(isDarkMode?'text-gray-600':'text-gray-300')}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm font-medium\",children:\"No notifications\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-xs mt-1\",children:\"You're all caught up!\"})]}):notifications.slice(0,20).map(n=>/*#__PURE__*/_jsx(\"div\",{className:\"group p-4 rounded-xl border transition-all duration-200 hover:shadow-md \".concat(isDarkMode?'bg-gray-700 border-gray-600 hover:bg-gray-600':'bg-gray-50 border-gray-100 hover:bg-white'),children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-start justify-between\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex-1 min-w-0\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-2 mb-2\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"px-2 py-1 rounded-full text-xs font-semibold \".concat(n.type==='activity'?isDarkMode?'bg-blue-600 text-blue-100':'bg-blue-100 text-blue-700':n.type==='due_soon'?isDarkMode?'bg-yellow-600 text-yellow-100':'bg-yellow-100 text-yellow-700':isDarkMode?'bg-green-600 text-green-100':'bg-green-100 text-green-700'),children:n.type==='activity'?'Activity':n.type==='due_soon'?'Due Soon':'Message'}),/*#__PURE__*/_jsxs(\"span\",{className:\"text-xs \".concat(isDarkMode?'text-gray-400':'text-gray-500'),children:[new Date(n.created_at).toLocaleDateString(),\" \",new Date(n.created_at).toLocaleTimeString([],{hour:'2-digit',minute:'2-digit'})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"text-sm \".concat(isDarkMode?'text-white':'text-gray-900'),children:n.type==='activity'?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"p\",{className:\"font-medium line-clamp-2\",children:n.description}),n.task_title&&/*#__PURE__*/_jsxs(\"p\",{className:\"text-xs mt-1 \".concat(isDarkMode?'text-gray-400':'text-gray-500'),children:[\"Task: \",n.task_title]})]}):n.type==='due_soon'?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"p\",{className:\"font-medium line-clamp-2\",children:n.content}),n.project_name&&/*#__PURE__*/_jsxs(\"p\",{className:\"text-xs mt-1 \".concat(isDarkMode?'text-gray-400':'text-gray-500'),children:[\"Project: \",n.project_name]})]}):/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"p\",{className:\"font-medium line-clamp-2\",children:n.content}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-xs mt-1 \".concat(isDarkMode?'text-gray-400':'text-gray-500'),children:[\"From: \",n.author_name,n.project_name?\" \\u2022 \".concat(n.project_name):'']})]})})]}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>clearIndividualNotification(n),className:\"ml-2 p-1 rounded-full opacity-0 group-hover:opacity-100 transition-all duration-200 \".concat(isDarkMode?'text-gray-400 hover:text-gray-300 hover:bg-gray-600':'text-gray-400 hover:text-gray-600 hover:bg-gray-200'),title:\"Clear notification\",children:/*#__PURE__*/_jsx(X,{className:\"h-4 w-4\"})})]})},\"\".concat(n.type,\"-\").concat(n.id)))})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-3\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"text-right\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-sm font-medium \".concat(isDarkMode?'text-white':'text-gray-900'),children:user!==null&&user!==void 0&&user.first_name?\"\".concat(user.first_name,\" \").concat(user.last_name||'').trim():(user===null||user===void 0?void 0:user.username)||''}),/*#__PURE__*/_jsx(\"p\",{className:\"text-xs capitalize \".concat(isDarkMode?'text-gray-400':'text-gray-500'),children:user===null||user===void 0?void 0:(_user$role=user.role)===null||_user$role===void 0?void 0:_user$role.replace('_',' ')})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-2\",children:[/*#__PURE__*/_jsx(Link,{to:\"/profile\",className:\"\".concat(isDarkMode?'text-gray-400 hover:text-gray-300':'text-gray-400 hover:text-gray-600'),children:/*#__PURE__*/_jsx(User,{className:\"h-6 w-6\"})}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setShowLogoutModal(true),className:\"\".concat(isDarkMode?'text-gray-400 hover:text-gray-300':'text-gray-400 hover:text-gray-600'),title:\"Logout\",children:/*#__PURE__*/_jsx(LogOut,{className:\"h-6 w-6\"})})]})]})]})]}),/*#__PURE__*/_jsx(\"main\",{className:\"p-4 lg:p-8 \".concat(isDarkMode?'bg-gray-900':'bg-gray-50'),children:children}),showLogoutModal&&/*#__PURE__*/_jsxs(\"div\",{className:\"fixed inset-0 z-50 flex items-center justify-center\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"absolute inset-0 bg-gray-900/40\",onClick:()=>setShowLogoutModal(false)}),/*#__PURE__*/_jsxs(\"div\",{className:\"relative rounded-lg shadow-xl w-full max-w-md p-6 \".concat(isDarkMode?'bg-gray-800':'bg-white'),children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-semibold mb-2 \".concat(isDarkMode?'text-white':'text-gray-900'),children:\"Confirm Logout\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm mb-4 \".concat(isDarkMode?'text-gray-300':'text-gray-600'),children:\"For security, please enter your password to logout.\"}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",className:\"w-full border rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500 \".concat(isDarkMode?'bg-gray-700 border-gray-600 text-white placeholder-gray-400':'border-gray-300'),placeholder:\"Enter your password\",value:logoutPassword,onChange:e=>setLogoutPassword(e.target.value)}),/*#__PURE__*/_jsxs(\"div\",{className:\"mt-4 flex justify-end gap-2\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"px-4 py-2 text-sm rounded-md border \".concat(isDarkMode?'border-gray-600 text-gray-300 hover:bg-gray-700':'border-gray-300 text-gray-700 hover:bg-gray-50'),onClick:()=>{setShowLogoutModal(false);setLogoutPassword('');},children:\"Cancel\"}),/*#__PURE__*/_jsx(\"button\",{className:\"px-4 py-2 text-sm rounded-md text-white \".concat(logoutPassword?'bg-red-600 hover:bg-red-700':'bg-red-300 cursor-not-allowed'),disabled:!logoutPassword,onClick:()=>{// Optionally verify password with backend before logout\nlogout();setShowLogoutModal(false);setLogoutPassword('');},children:\"Logout\"})]})]})]}),showSearch&&/*#__PURE__*/_jsxs(\"div\",{className:\"fixed inset-0 z-50 flex items-center justify-center\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"absolute inset-0 bg-black bg-opacity-50\",onClick:()=>setShowSearch(false)}),/*#__PURE__*/_jsxs(\"div\",{className:\"relative w-full max-w-2xl mx-4 rounded-2xl shadow-2xl \".concat(isDarkMode?'bg-gray-800':'bg-white'),children:[/*#__PURE__*/_jsxs(\"div\",{className:\"p-6 border-b \".concat(isDarkMode?'border-gray-700':'border-gray-200'),children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-3\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"p-3 rounded-xl \".concat(isDarkMode?'bg-blue-600':'bg-blue-100'),children:/*#__PURE__*/_jsx(Search,{className:\"h-6 w-6 \".concat(isDarkMode?'text-white':'text-blue-600')})}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-2xl font-bold \".concat(isDarkMode?'text-white':'text-gray-900'),children:\"Search\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm \".concat(isDarkMode?'text-gray-400':'text-gray-500'),children:\"Search across all your data\"})]})]}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setShowSearch(false),className:\"absolute top-4 right-4 p-2 rounded-lg \".concat(isDarkMode?'text-gray-400 hover:text-gray-300 hover:bg-gray-700':'text-gray-400 hover:text-gray-600 hover:bg-gray-100'),children:/*#__PURE__*/_jsx(X,{className:\"h-5 w-5\"})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"p-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"relative\",children:[/*#__PURE__*/_jsx(Search,{className:\"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 \".concat(isDarkMode?'text-gray-400':'text-gray-500')}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Search tasks, projects, users...\",value:searchQuery,onChange:handleSearchChange,className:\"w-full pl-10 pr-4 py-3 border rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 \".concat(isDarkMode?'bg-gray-700 border-gray-600 text-white placeholder-gray-400':'border-gray-300'),autoFocus:true})]}),/*#__PURE__*/_jsx(\"div\",{className:\"mt-6\",children:isSearching?/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-center py-8\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600\"}),/*#__PURE__*/_jsx(\"span\",{className:\"ml-2 text-sm \".concat(isDarkMode?'text-gray-400':'text-gray-500'),children:\"Searching...\"})]}):searchQuery.trim()?/*#__PURE__*/_jsx(\"div\",{className:\"space-y-3\",children:searchResults.length>0?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"text-sm font-medium \".concat(isDarkMode?'text-white':'text-gray-900'),children:[\"Found \",searchResults.length,\" result\",searchResults.length!==1?'s':'']}),/*#__PURE__*/_jsx(\"div\",{className:\"space-y-2 max-h-96 overflow-y-auto\",children:searchResults.map((result,index)=>/*#__PURE__*/_jsx(\"div\",{className:\"p-3 rounded-lg border cursor-pointer hover:shadow-md transition-all duration-200 \".concat(isDarkMode?'bg-gray-700 border-gray-600 hover:bg-gray-600':'bg-gray-50 border-gray-200 hover:bg-white'),onClick:()=>{// Navigate based on result type\nif(result.type==='task'){window.location.href=\"/tasks\";}else if(result.type==='project'){window.location.href=\"/projects\";}else if(result.type==='employee'){window.location.href=\"/users\";}setShowSearch(false);},children:/*#__PURE__*/_jsx(\"div\",{className:\"flex items-start justify-between\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex-1 min-w-0\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-2 mb-1\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"px-2 py-1 rounded-full text-xs font-semibold \".concat(result.type==='task'?isDarkMode?'bg-blue-600 text-blue-100':'bg-blue-100 text-blue-700':result.type==='project'?isDarkMode?'bg-green-600 text-green-100':'bg-green-100 text-green-700':isDarkMode?'bg-purple-600 text-purple-100':'bg-purple-100 text-purple-700'),children:result.type.charAt(0).toUpperCase()+result.type.slice(1)}),result.status&&/*#__PURE__*/_jsx(\"span\",{className:\"text-xs px-2 py-1 rounded \".concat(isDarkMode?'bg-gray-600 text-gray-300':'bg-gray-200 text-gray-600'),children:result.status.replace('_',' ').toUpperCase()})]}),/*#__PURE__*/_jsx(\"h4\",{className:\"font-medium truncate \".concat(isDarkMode?'text-white':'text-gray-900'),children:result.title}),result.description&&/*#__PURE__*/_jsx(\"p\",{className:\"text-sm mt-1 truncate \".concat(isDarkMode?'text-gray-400':'text-gray-500'),children:result.description}),result.project&&/*#__PURE__*/_jsxs(\"p\",{className:\"text-xs mt-1 \".concat(isDarkMode?'text-gray-500':'text-gray-400'),children:[\"Project: \",result.project]}),result.role&&/*#__PURE__*/_jsxs(\"p\",{className:\"text-xs mt-1 \".concat(isDarkMode?'text-gray-500':'text-gray-400'),children:[\"Role: \",result.role.replace('_',' ').toUpperCase()]})]})})},\"\".concat(result.type,\"-\").concat(result.id,\"-\").concat(index)))})]}):/*#__PURE__*/_jsxs(\"div\",{className:\"text-center py-8 \".concat(isDarkMode?'text-gray-400':'text-gray-500'),children:[/*#__PURE__*/_jsx(Search,{className:\"h-12 w-12 mx-auto mb-3 \".concat(isDarkMode?'text-gray-600':'text-gray-300')}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm font-medium\",children:\"No results found\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-xs mt-1\",children:\"Try different keywords or check spelling\"})]})}):/*#__PURE__*/_jsxs(\"div\",{className:\"text-center py-8 \".concat(isDarkMode?'text-gray-400':'text-gray-500'),children:[/*#__PURE__*/_jsx(Search,{className:\"h-12 w-12 mx-auto mb-3 \".concat(isDarkMode?'text-gray-600':'text-gray-300')}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm font-medium\",children:\"Start typing to search\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-xs mt-1\",children:\"Search across tasks, projects, and users\"})]})})]})]})]})]})]});};export default Layout;","map":{"version":3,"names":["React","useMemo","useState","useQuery","tasksAPI","projectsAPI","authAPI","Link","useLocation","useAuth","useTheme","LayoutDashboard","CheckSquare","Kanban","FolderOpen","Users","User","LogOut","Menu","X","Bell","Moon","Sun","Search","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","Layout","_ref","_notifResp$data","_user$role","children","user","logout","isDarkMode","toggleTheme","location","sidebarOpen","setSidebarOpen","showLogoutModal","setShowLogoutModal","logoutPassword","setLogoutPassword","showNotif","setShowNotif","showSearch","setShowSearch","searchQuery","setSearchQuery","searchResults","setSearchResults","isSearching","setIsSearching","data","notifResp","getNotifications","refetchInterval","notificationsRaw","items","clearedAt","setClearedAt","Number","window","localStorage","getItem","clearedNotifications","setClearedNotifications","stored","JSON","parse","notifications","filtered","filter","n","Date","created_at","getTime","includes","concat","type","id","clearIndividualNotification","notification","notificationId","newCleared","setItem","stringify","performSearch","query","trim","_tasksRes$value","_projectsRes$value","_employeesRes$value","searchPromises","getTasks","search","getProjects","getEmployees","tasksRes","projectsRes","employeesRes","Promise","allSettled","results","status","value","tasks","Array","isArray","forEach","task","_task$title","_task$description","title","toLowerCase","description","push","project","project_name","projects","_project$name","_project$description","name","progress","progress_percentage","employees","employee","_employee$email","fullName","first_name","last_name","email","role","error","console","handleSearchChange","e","target","clearTimeout","searchTimeout","setTimeout","navigation","href","icon","isActive","path","pathname","className","onClick","map","item","Icon","to","length","Math","min","now","String","slice","toLocaleDateString","toLocaleTimeString","hour","minute","task_title","content","author_name","username","replace","placeholder","onChange","disabled","autoFocus","result","index","charAt","toUpperCase"],"sources":["C:/Users/B Chaitanya Chowdary/Desktop/Task/frontend/src/components/Layout/Layout.js"],"sourcesContent":["import React, { useMemo, useState } from 'react';\r\nimport { useQuery } from 'react-query';\r\nimport { tasksAPI, projectsAPI, authAPI } from '../../services/api';\r\nimport { Link, useLocation } from 'react-router-dom';\r\nimport { useAuth } from '../../contexts/AuthContext';\r\nimport { useTheme } from '../../contexts/ThemeContext';\r\nimport {\r\n  LayoutDashboard,\r\n  CheckSquare,\r\n  Kanban,\r\n  FolderOpen,\r\n  Users,\r\n  User,\r\n  LogOut,\r\n  Menu,\r\n  X,\r\n  Bell,\r\n  Moon,\r\n  Sun,\r\n  Search,\r\n} from 'lucide-react';\r\n\r\nconst Layout = ({ children }) => {\r\n  const { user, logout } = useAuth();\r\n  const { isDarkMode, toggleTheme } = useTheme();\r\n  const location = useLocation();\r\n  const [sidebarOpen, setSidebarOpen] = useState(false);\r\n  const [showLogoutModal, setShowLogoutModal] = useState(false);\r\n  const [logoutPassword, setLogoutPassword] = useState('');\r\n  const [showNotif, setShowNotif] = useState(false);\r\n  const [showSearch, setShowSearch] = useState(false);\r\n  const [searchQuery, setSearchQuery] = useState('');\r\n  const [searchResults, setSearchResults] = useState([]);\r\n  const [isSearching, setIsSearching] = useState(false);\r\n\r\n  const { data: notifResp } = useQuery(\r\n    'notifications',\r\n    tasksAPI.getNotifications,\r\n    { refetchInterval: 15000 }\r\n  );\r\n  const notificationsRaw = notifResp?.data?.items || notifResp?.items || [];\r\n  const [clearedAt, setClearedAt] = useState(() => Number(window.localStorage.getItem('tf_cleared_at') || 0));\r\n  const [clearedNotifications, setClearedNotifications] = useState(() => {\r\n    const stored = window.localStorage.getItem('tf_cleared_notifications');\r\n    return stored ? JSON.parse(stored) : [];\r\n  });\r\n  \r\n  const notifications = useMemo(() => {\r\n    let filtered = notificationsRaw || [];\r\n    \r\n    // Filter by cleared timestamp\r\n    if (clearedAt) {\r\n      filtered = filtered.filter((n) => new Date(n.created_at).getTime() > clearedAt);\r\n    }\r\n    \r\n    // Filter by individually cleared notifications\r\n    filtered = filtered.filter((n) => !clearedNotifications.includes(`${n.type}-${n.id}`));\r\n    \r\n    return filtered;\r\n  }, [notificationsRaw, clearedAt, clearedNotifications]);\r\n\r\n  const clearIndividualNotification = (notification) => {\r\n    const notificationId = `${notification.type}-${notification.id}`;\r\n    const newCleared = [...clearedNotifications, notificationId];\r\n    setClearedNotifications(newCleared);\r\n    window.localStorage.setItem('tf_cleared_notifications', JSON.stringify(newCleared));\r\n  };\r\n\r\n  // Search functionality\r\n  const performSearch = async (query) => {\r\n    if (!query.trim()) {\r\n      setSearchResults([]);\r\n      return;\r\n    }\r\n\r\n    setIsSearching(true);\r\n    try {\r\n      // Search across different data sources\r\n      const searchPromises = [\r\n        tasksAPI.getTasks({ search: query }),\r\n        projectsAPI.getProjects({ search: query }),\r\n        authAPI.getEmployees({ search: query })\r\n      ];\r\n\r\n      const [tasksRes, projectsRes, employeesRes] = await Promise.allSettled(searchPromises);\r\n      \r\n      const results = [];\r\n      \r\n      // Process tasks\r\n      if (tasksRes.status === 'fulfilled' && tasksRes.value?.data) {\r\n        const tasks = Array.isArray(tasksRes.value.data) ? tasksRes.value.data : tasksRes.value.data.results || [];\r\n        tasks.forEach(task => {\r\n          if (task.title?.toLowerCase().includes(query.toLowerCase()) || \r\n              task.description?.toLowerCase().includes(query.toLowerCase())) {\r\n            results.push({\r\n              type: 'task',\r\n              id: task.id,\r\n              title: task.title,\r\n              description: task.description,\r\n              status: task.status,\r\n              project: task.project_name\r\n            });\r\n          }\r\n        });\r\n      }\r\n\r\n      // Process projects\r\n      if (projectsRes.status === 'fulfilled' && projectsRes.value?.data) {\r\n        const projects = Array.isArray(projectsRes.value.data) ? projectsRes.value.data : projectsRes.value.data.results || [];\r\n        projects.forEach(project => {\r\n          if (project.name?.toLowerCase().includes(query.toLowerCase()) || \r\n              project.description?.toLowerCase().includes(query.toLowerCase())) {\r\n            results.push({\r\n              type: 'project',\r\n              id: project.id,\r\n              title: project.name,\r\n              description: project.description,\r\n              status: project.status,\r\n              progress: project.progress_percentage\r\n            });\r\n          }\r\n        });\r\n      }\r\n\r\n      // Process employees\r\n      if (employeesRes.status === 'fulfilled' && employeesRes.value?.data) {\r\n        const employees = Array.isArray(employeesRes.value.data) ? employeesRes.value.data : employeesRes.value.data.results || [];\r\n        employees.forEach(employee => {\r\n          const fullName = `${employee.first_name || ''} ${employee.last_name || ''}`.trim();\r\n          if (fullName.toLowerCase().includes(query.toLowerCase()) || \r\n              employee.email?.toLowerCase().includes(query.toLowerCase())) {\r\n            results.push({\r\n              type: 'employee',\r\n              id: employee.id,\r\n              title: fullName,\r\n              description: employee.email,\r\n              role: employee.role\r\n            });\r\n          }\r\n        });\r\n      }\r\n\r\n      setSearchResults(results);\r\n    } catch (error) {\r\n      console.error('Search error:', error);\r\n      setSearchResults([]);\r\n    } finally {\r\n      setIsSearching(false);\r\n    }\r\n  };\r\n\r\n  const handleSearchChange = (e) => {\r\n    const query = e.target.value;\r\n    setSearchQuery(query);\r\n    \r\n    // Debounce search\r\n    clearTimeout(window.searchTimeout);\r\n    window.searchTimeout = setTimeout(() => {\r\n      performSearch(query);\r\n    }, 300);\r\n  };\r\n\r\n  const navigation = [\r\n    { name: 'Dashboard', href: '/dashboard', icon: LayoutDashboard },\r\n    { name: 'Tasks', href: '/tasks', icon: CheckSquare },\r\n    { name: 'Kanban', href: '/kanban', icon: Kanban },\r\n    { name: 'Projects', href: '/projects', icon: FolderOpen },\r\n    ...(user?.role === 'scrum_master' ? [{ name: 'Users', href: '/users', icon: Users }] : []),\r\n  ];\r\n\r\n  const isActive = (path) => location.pathname === path;\r\n\r\n  return (\r\n    <div className={`min-h-screen ${isDarkMode ? 'dark bg-gray-900' : 'bg-gray-50'}`}>\r\n      {/* Mobile sidebar */}\r\n      <div className={`fixed inset-0 z-50 lg:hidden ${sidebarOpen ? 'block' : 'hidden'}`}>\r\n        <div className=\"fixed inset-0 bg-gray-600 bg-opacity-75\" onClick={() => setSidebarOpen(false)} />\r\n        <div className={`fixed inset-y-0 left-0 flex w-64 flex-col shadow-xl ${isDarkMode ? 'bg-gray-800' : 'bg-white'}`}>\r\n          <div className=\"flex h-16 items-center justify-between px-4\">\r\n            <h1 className={`text-xl font-bold ${isDarkMode ? 'text-white' : 'text-gray-900'}`}>TaskFlow</h1>\r\n            <button\r\n              onClick={() => setSidebarOpen(false)}\r\n              className=\"text-gray-400 hover:text-gray-600\"\r\n            >\r\n              <X className=\"h-6 w-6\" />\r\n            </button>\r\n          </div>\r\n          <nav className=\"flex-1 px-4 py-4 space-y-2\">\r\n            {navigation.map((item) => {\r\n              const Icon = item.icon;\r\n              return (\r\n                <Link\r\n                  key={item.name}\r\n                  to={item.href}\r\n                  className={`flex items-center px-3 py-2 text-sm font-medium rounded-md ${\r\n                    isActive(item.href)\r\n                      ? isDarkMode ? 'bg-blue-600 text-white' : 'bg-blue-100 text-blue-700'\r\n                      : isDarkMode ? 'text-gray-300 hover:bg-gray-700 hover:text-white' : 'text-gray-600 hover:bg-gray-50 hover:text-gray-900'\r\n                  }`}\r\n                  onClick={() => setSidebarOpen(false)}\r\n                >\r\n                  <Icon className=\"mr-3 h-5 w-5\" />\r\n                  {item.name}\r\n                </Link>\r\n              );\r\n            })}\r\n          </nav>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Desktop sidebar */}\r\n      <div className=\"hidden lg:fixed lg:inset-y-0 lg:flex lg:w-64 lg:flex-col\">\r\n        <div className={`flex flex-col flex-grow border-r ${isDarkMode ? 'bg-gray-800 border-gray-700' : 'bg-white border-gray-200'}`}>\r\n          <div className=\"flex h-16 items-center px-4\">\r\n            <h1 className={`text-xl font-bold ${isDarkMode ? 'text-white' : 'text-gray-900'}`}>TaskFlow</h1>\r\n          </div>\r\n          <nav className=\"flex-1 px-4 py-4 space-y-2\">\r\n            {navigation.map((item) => {\r\n              const Icon = item.icon;\r\n              return (\r\n                <Link\r\n                  key={item.name}\r\n                  to={item.href}\r\n                  className={`flex items-center px-3 py-2 text-sm font-medium rounded-md ${\r\n                    isActive(item.href)\r\n                      ? isDarkMode ? 'bg-blue-600 text-white' : 'bg-blue-100 text-blue-700'\r\n                      : isDarkMode ? 'text-gray-300 hover:bg-gray-700 hover:text-white' : 'text-gray-600 hover:bg-gray-50 hover:text-gray-900'\r\n                  }`}\r\n                >\r\n                  <Icon className=\"mr-3 h-5 w-5\" />\r\n                  {item.name}\r\n                </Link>\r\n              );\r\n            })}\r\n          </nav>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Main content */}\r\n      <div className=\"lg:pl-64\">\r\n        {/* Top bar */}\r\n        <div className={`sticky top-0 z-40 flex h-16 items-center justify-between border-b px-4 lg:px-8 ${isDarkMode ? 'bg-gray-800 border-gray-700' : 'bg-white border-gray-200'}`}>\r\n          <button\r\n            onClick={() => setSidebarOpen(true)}\r\n            className={`lg:hidden ${isDarkMode ? 'text-gray-400 hover:text-gray-300' : 'text-gray-500 hover:text-gray-600'}`}\r\n          >\r\n            <Menu className=\"h-6 w-6\" />\r\n          </button>\r\n          \r\n          <div className=\"flex items-center space-x-4 ml-auto\">\r\n            {/* Search Button */}\r\n            <button\r\n              onClick={() => setShowSearch(true)}\r\n              className={`p-2 rounded-lg transition-colors ${isDarkMode ? 'text-gray-400 hover:text-gray-300 hover:bg-gray-700' : 'text-gray-400 hover:text-gray-600 hover:bg-gray-100'}`}\r\n              title=\"Search\"\r\n            >\r\n              <Search className=\"h-5 w-5\" />\r\n            </button>\r\n\r\n            {/* Dark Mode Toggle */}\r\n            <button\r\n              onClick={toggleTheme}\r\n              className={`p-2 rounded-lg transition-colors ${isDarkMode ? 'text-gray-400 hover:text-gray-300 hover:bg-gray-700' : 'text-gray-400 hover:text-gray-600 hover:bg-gray-100'}`}\r\n              title={isDarkMode ? 'Switch to Light Mode' : 'Switch to Dark Mode'}\r\n            >\r\n              {isDarkMode ? <Sun className=\"h-5 w-5 text-yellow-500\" /> : <Moon className=\"h-5 w-5\" />}\r\n            </button>\r\n\r\n            {/* Notifications */}\r\n            <div className=\"relative\">\r\n              <button className={`relative ${isDarkMode ? 'text-gray-400 hover:text-gray-300' : 'text-gray-400 hover:text-gray-600'}`} onClick={() => setShowNotif(!showNotif)}>\r\n                <Bell className=\"h-6 w-6\" />\r\n                {notifications.length > 0 && (\r\n                  <span className=\"absolute -top-1 -right-1 inline-flex items-center justify-center px-1.5 py-0.5 text-[10px] font-medium leading-none text-white bg-red-600 rounded-full\">\r\n                    {Math.min(notifications.length, 9)}+\r\n                  </span>\r\n                )}\r\n              </button>\r\n              {showNotif && (\r\n                <div className={`absolute right-0 mt-2 w-96 max-h-96 overflow-y-auto border rounded-xl shadow-2xl z-50 ${isDarkMode ? 'bg-gray-800 border-gray-700' : 'bg-white border-gray-200'}`}>\r\n                  <div className={`p-4 border-b flex items-center justify-between ${isDarkMode ? 'border-gray-700' : 'border-gray-200'}`}>\r\n                    <div className=\"flex items-center gap-2\">\r\n                      <div className={`p-2 rounded-lg ${isDarkMode ? 'bg-blue-600' : 'bg-blue-100'}`}>\r\n                        <Bell className={`h-4 w-4 ${isDarkMode ? 'text-white' : 'text-blue-600'}`} />\r\n                      </div>\r\n                      <div>\r\n                        <div className={`font-bold text-lg ${isDarkMode ? 'text-white' : 'text-gray-900'}`}>Notifications</div>\r\n                        <div className={`text-xs ${isDarkMode ? 'text-gray-400' : 'text-gray-500'}`}>\r\n                          {notifications.length} {notifications.length === 1 ? 'notification' : 'notifications'}\r\n                        </div>\r\n                      </div>\r\n                    </div>\r\n                    <button\r\n                      className={`px-3 py-1 text-xs rounded-lg font-medium transition-colors ${isDarkMode ? 'bg-red-600 text-white hover:bg-red-700' : 'bg-red-100 text-red-700 hover:bg-red-200'}`}\r\n                      onClick={() => {\r\n                        const now = Date.now();\r\n                        window.localStorage.setItem('tf_cleared_at', String(now));\r\n                        setClearedAt(now);\r\n                      }}\r\n                    >\r\n                      Clear All\r\n                    </button>\r\n                  </div>\r\n                  <div className=\"p-3 space-y-3\">\r\n                    {notifications.length === 0 ? (\r\n                      <div className={`p-8 text-center ${isDarkMode ? 'text-gray-400' : 'text-gray-500'}`}>\r\n                        <Bell className={`h-12 w-12 mx-auto mb-3 ${isDarkMode ? 'text-gray-600' : 'text-gray-300'}`} />\r\n                        <p className=\"text-sm font-medium\">No notifications</p>\r\n                        <p className=\"text-xs mt-1\">You're all caught up!</p>\r\n                      </div>\r\n                    ) : (\r\n                      notifications.slice(0, 20).map((n) => (\r\n                        <div key={`${n.type}-${n.id}`} className={`group p-4 rounded-xl border transition-all duration-200 hover:shadow-md ${isDarkMode ? 'bg-gray-700 border-gray-600 hover:bg-gray-600' : 'bg-gray-50 border-gray-100 hover:bg-white'}`}>\r\n                          <div className=\"flex items-start justify-between\">\r\n                            <div className=\"flex-1 min-w-0\">\r\n                              <div className=\"flex items-center gap-2 mb-2\">\r\n                                <span className={`px-2 py-1 rounded-full text-xs font-semibold ${n.type === 'activity' ? (isDarkMode ? 'bg-blue-600 text-blue-100' : 'bg-blue-100 text-blue-700') : (n.type === 'due_soon' ? (isDarkMode ? 'bg-yellow-600 text-yellow-100' : 'bg-yellow-100 text-yellow-700') : (isDarkMode ? 'bg-green-600 text-green-100' : 'bg-green-100 text-green-700'))}`}>\r\n                                  {n.type === 'activity' ? 'Activity' : (n.type === 'due_soon' ? 'Due Soon' : 'Message')}\r\n                                </span>\r\n                                <span className={`text-xs ${isDarkMode ? 'text-gray-400' : 'text-gray-500'}`}>\r\n                                  {new Date(n.created_at).toLocaleDateString()} {new Date(n.created_at).toLocaleTimeString([], {hour: '2-digit', minute:'2-digit'})}\r\n                                </span>\r\n                              </div>\r\n                              <div className={`text-sm ${isDarkMode ? 'text-white' : 'text-gray-900'}`}>\r\n                                {n.type === 'activity' ? (\r\n                                  <>\r\n                                    <p className=\"font-medium line-clamp-2\">{n.description}</p>\r\n                                    {n.task_title && (<p className={`text-xs mt-1 ${isDarkMode ? 'text-gray-400' : 'text-gray-500'}`}>Task: {n.task_title}</p>)}\r\n                                  </>\r\n                                ) : n.type === 'due_soon' ? (\r\n                                  <>\r\n                                    <p className=\"font-medium line-clamp-2\">{n.content}</p>\r\n                                    {n.project_name && (<p className={`text-xs mt-1 ${isDarkMode ? 'text-gray-400' : 'text-gray-500'}`}>Project: {n.project_name}</p>)}\r\n                                  </>\r\n                                ) : (\r\n                                  <>\r\n                                    <p className=\"font-medium line-clamp-2\">{n.content}</p>\r\n                                    <p className={`text-xs mt-1 ${isDarkMode ? 'text-gray-400' : 'text-gray-500'}`}>From: {n.author_name}{n.project_name ? ` â€¢ ${n.project_name}` : ''}</p>\r\n                                  </>\r\n                                )}\r\n                              </div>\r\n                            </div>\r\n                            <button\r\n                              onClick={() => clearIndividualNotification(n)}\r\n                              className={`ml-2 p-1 rounded-full opacity-0 group-hover:opacity-100 transition-all duration-200 ${isDarkMode ? 'text-gray-400 hover:text-gray-300 hover:bg-gray-600' : 'text-gray-400 hover:text-gray-600 hover:bg-gray-200'}`}\r\n                              title=\"Clear notification\"\r\n                            >\r\n                              <X className=\"h-4 w-4\" />\r\n                            </button>\r\n                          </div>\r\n                        </div>\r\n                      ))\r\n                    )}\r\n                  </div>\r\n                </div>\r\n              )}\r\n            </div>\r\n            \r\n            <div className=\"flex items-center space-x-3\">\r\n              <div className=\"text-right\">\r\n                <p className={`text-sm font-medium ${isDarkMode ? 'text-white' : 'text-gray-900'}`}>{user?.first_name ? `${user.first_name} ${user.last_name || ''}`.trim() : (user?.username || '')}</p>\r\n                <p className={`text-xs capitalize ${isDarkMode ? 'text-gray-400' : 'text-gray-500'}`}>{user?.role?.replace('_', ' ')}</p>\r\n              </div>\r\n              \r\n              <div className=\"flex items-center space-x-2\">\r\n                <Link\r\n                  to=\"/profile\"\r\n                  className={`${isDarkMode ? 'text-gray-400 hover:text-gray-300' : 'text-gray-400 hover:text-gray-600'}`}\r\n                >\r\n                  <User className=\"h-6 w-6\" />\r\n                </Link>\r\n                <button\r\n                  onClick={() => setShowLogoutModal(true)}\r\n                  className={`${isDarkMode ? 'text-gray-400 hover:text-gray-300' : 'text-gray-400 hover:text-gray-600'}`}\r\n                  title=\"Logout\"\r\n                >\r\n                  <LogOut className=\"h-6 w-6\" />\r\n                </button>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        {/* Page content */}\r\n        <main className={`p-4 lg:p-8 ${isDarkMode ? 'bg-gray-900' : 'bg-gray-50'}`}>\r\n          {children}\r\n        </main>\r\n\r\n        {/* Logout Confirmation Modal (in-page) */}\r\n        {showLogoutModal && (\r\n          <div className=\"fixed inset-0 z-50 flex items-center justify-center\">\r\n            <div className=\"absolute inset-0 bg-gray-900/40\" onClick={() => setShowLogoutModal(false)} />\r\n            <div className={`relative rounded-lg shadow-xl w-full max-w-md p-6 ${isDarkMode ? 'bg-gray-800' : 'bg-white'}`}>\r\n              <h3 className={`text-lg font-semibold mb-2 ${isDarkMode ? 'text-white' : 'text-gray-900'}`}>Confirm Logout</h3>\r\n              <p className={`text-sm mb-4 ${isDarkMode ? 'text-gray-300' : 'text-gray-600'}`}>For security, please enter your password to logout.</p>\r\n              <input\r\n                type=\"password\"\r\n                className={`w-full border rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500 ${isDarkMode ? 'bg-gray-700 border-gray-600 text-white placeholder-gray-400' : 'border-gray-300'}`}\r\n                placeholder=\"Enter your password\"\r\n                value={logoutPassword}\r\n                onChange={(e) => setLogoutPassword(e.target.value)}\r\n              />\r\n              <div className=\"mt-4 flex justify-end gap-2\">\r\n                <button\r\n                  className={`px-4 py-2 text-sm rounded-md border ${isDarkMode ? 'border-gray-600 text-gray-300 hover:bg-gray-700' : 'border-gray-300 text-gray-700 hover:bg-gray-50'}`}\r\n                  onClick={() => {\r\n                    setShowLogoutModal(false);\r\n                    setLogoutPassword('');\r\n                  }}\r\n                >\r\n                  Cancel\r\n                </button>\r\n                <button\r\n                  className={`px-4 py-2 text-sm rounded-md text-white ${logoutPassword ? 'bg-red-600 hover:bg-red-700' : 'bg-red-300 cursor-not-allowed'}`}\r\n                  disabled={!logoutPassword}\r\n                  onClick={() => {\r\n                    // Optionally verify password with backend before logout\r\n                    logout();\r\n                    setShowLogoutModal(false);\r\n                    setLogoutPassword('');\r\n                  }}\r\n                >\r\n                  Logout\r\n                </button>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        )}\r\n\r\n        {/* Search Modal */}\r\n        {showSearch && (\r\n          <div className=\"fixed inset-0 z-50 flex items-center justify-center\">\r\n            <div className=\"absolute inset-0 bg-black bg-opacity-50\" onClick={() => setShowSearch(false)} />\r\n            <div className={`relative w-full max-w-2xl mx-4 rounded-2xl shadow-2xl ${isDarkMode ? 'bg-gray-800' : 'bg-white'}`}>\r\n              <div className={`p-6 border-b ${isDarkMode ? 'border-gray-700' : 'border-gray-200'}`}>\r\n                <div className=\"flex items-center gap-3\">\r\n                  <div className={`p-3 rounded-xl ${isDarkMode ? 'bg-blue-600' : 'bg-blue-100'}`}>\r\n                    <Search className={`h-6 w-6 ${isDarkMode ? 'text-white' : 'text-blue-600'}`} />\r\n                  </div>\r\n                  <div>\r\n                    <h2 className={`text-2xl font-bold ${isDarkMode ? 'text-white' : 'text-gray-900'}`}>Search</h2>\r\n                    <p className={`text-sm ${isDarkMode ? 'text-gray-400' : 'text-gray-500'}`}>Search across all your data</p>\r\n                  </div>\r\n                </div>\r\n                <button\r\n                  onClick={() => setShowSearch(false)}\r\n                  className={`absolute top-4 right-4 p-2 rounded-lg ${isDarkMode ? 'text-gray-400 hover:text-gray-300 hover:bg-gray-700' : 'text-gray-400 hover:text-gray-600 hover:bg-gray-100'}`}\r\n                >\r\n                  <X className=\"h-5 w-5\" />\r\n                </button>\r\n              </div>\r\n              <div className=\"p-6\">\r\n                <div className=\"relative\">\r\n                  <Search className={`absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 ${isDarkMode ? 'text-gray-400' : 'text-gray-500'}`} />\r\n                  <input\r\n                    type=\"text\"\r\n                    placeholder=\"Search tasks, projects, users...\"\r\n                    value={searchQuery}\r\n                    onChange={handleSearchChange}\r\n                    className={`w-full pl-10 pr-4 py-3 border rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 ${isDarkMode ? 'bg-gray-700 border-gray-600 text-white placeholder-gray-400' : 'border-gray-300'}`}\r\n                    autoFocus\r\n                  />\r\n                </div>\r\n                \r\n                {/* Search Results */}\r\n                <div className=\"mt-6\">\r\n                  {isSearching ? (\r\n                    <div className=\"flex items-center justify-center py-8\">\r\n                      <div className=\"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600\"></div>\r\n                      <span className={`ml-2 text-sm ${isDarkMode ? 'text-gray-400' : 'text-gray-500'}`}>Searching...</span>\r\n                    </div>\r\n                  ) : searchQuery.trim() ? (\r\n                    <div className=\"space-y-3\">\r\n                      {searchResults.length > 0 ? (\r\n                        <>\r\n                          <div className={`text-sm font-medium ${isDarkMode ? 'text-white' : 'text-gray-900'}`}>\r\n                            Found {searchResults.length} result{searchResults.length !== 1 ? 's' : ''}\r\n                          </div>\r\n                          <div className=\"space-y-2 max-h-96 overflow-y-auto\">\r\n                            {searchResults.map((result, index) => (\r\n                              <div\r\n                                key={`${result.type}-${result.id}-${index}`}\r\n                                className={`p-3 rounded-lg border cursor-pointer hover:shadow-md transition-all duration-200 ${\r\n                                  isDarkMode \r\n                                    ? 'bg-gray-700 border-gray-600 hover:bg-gray-600' \r\n                                    : 'bg-gray-50 border-gray-200 hover:bg-white'\r\n                                }`}\r\n                                onClick={() => {\r\n                                  // Navigate based on result type\r\n                                  if (result.type === 'task') {\r\n                                    window.location.href = `/tasks`;\r\n                                  } else if (result.type === 'project') {\r\n                                    window.location.href = `/projects`;\r\n                                  } else if (result.type === 'employee') {\r\n                                    window.location.href = `/users`;\r\n                                  }\r\n                                  setShowSearch(false);\r\n                                }}\r\n                              >\r\n                                <div className=\"flex items-start justify-between\">\r\n                                  <div className=\"flex-1 min-w-0\">\r\n                                    <div className=\"flex items-center gap-2 mb-1\">\r\n                                      <span className={`px-2 py-1 rounded-full text-xs font-semibold ${\r\n                                        result.type === 'task' \r\n                                          ? (isDarkMode ? 'bg-blue-600 text-blue-100' : 'bg-blue-100 text-blue-700')\r\n                                          : result.type === 'project'\r\n                                          ? (isDarkMode ? 'bg-green-600 text-green-100' : 'bg-green-100 text-green-700')\r\n                                          : (isDarkMode ? 'bg-purple-600 text-purple-100' : 'bg-purple-100 text-purple-700')\r\n                                      }`}>\r\n                                        {result.type.charAt(0).toUpperCase() + result.type.slice(1)}\r\n                                      </span>\r\n                                      {result.status && (\r\n                                        <span className={`text-xs px-2 py-1 rounded ${\r\n                                          isDarkMode ? 'bg-gray-600 text-gray-300' : 'bg-gray-200 text-gray-600'\r\n                                        }`}>\r\n                                          {result.status.replace('_', ' ').toUpperCase()}\r\n                                        </span>\r\n                                      )}\r\n                                    </div>\r\n                                    <h4 className={`font-medium truncate ${isDarkMode ? 'text-white' : 'text-gray-900'}`}>\r\n                                      {result.title}\r\n                                    </h4>\r\n                                    {result.description && (\r\n                                      <p className={`text-sm mt-1 truncate ${isDarkMode ? 'text-gray-400' : 'text-gray-500'}`}>\r\n                                        {result.description}\r\n                                      </p>\r\n                                    )}\r\n                                    {result.project && (\r\n                                      <p className={`text-xs mt-1 ${isDarkMode ? 'text-gray-500' : 'text-gray-400'}`}>\r\n                                        Project: {result.project}\r\n                                      </p>\r\n                                    )}\r\n                                    {result.role && (\r\n                                      <p className={`text-xs mt-1 ${isDarkMode ? 'text-gray-500' : 'text-gray-400'}`}>\r\n                                        Role: {result.role.replace('_', ' ').toUpperCase()}\r\n                                      </p>\r\n                                    )}\r\n                                  </div>\r\n                                </div>\r\n                              </div>\r\n                            ))}\r\n                          </div>\r\n                        </>\r\n                      ) : (\r\n                        <div className={`text-center py-8 ${isDarkMode ? 'text-gray-400' : 'text-gray-500'}`}>\r\n                          <Search className={`h-12 w-12 mx-auto mb-3 ${isDarkMode ? 'text-gray-600' : 'text-gray-300'}`} />\r\n                          <p className=\"text-sm font-medium\">No results found</p>\r\n                          <p className=\"text-xs mt-1\">Try different keywords or check spelling</p>\r\n                        </div>\r\n                      )}\r\n                    </div>\r\n                  ) : (\r\n                    <div className={`text-center py-8 ${isDarkMode ? 'text-gray-400' : 'text-gray-500'}`}>\r\n                      <Search className={`h-12 w-12 mx-auto mb-3 ${isDarkMode ? 'text-gray-600' : 'text-gray-300'}`} />\r\n                      <p className=\"text-sm font-medium\">Start typing to search</p>\r\n                      <p className=\"text-xs mt-1\">Search across tasks, projects, and users</p>\r\n                    </div>\r\n                  )}\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Layout;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}